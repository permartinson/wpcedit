(function(){var e={6849:function(e,t,n){function a(e,t,n,a){let s,i;function o(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}if(s=t<=8?54+4*Math.pow(2,t):54,i="BM",i+=o(s+e.length),i+=o(0),i+=o(s),i+=o(40),i+=o(n),i+=o(a),i+=String.fromCharCode(1,0),i+=String.fromCharCode(t,0),i+=o(0),i+=o(e.length),i+=o(2835),i+=o(2835),i+=o(0),i+=o(0),t<=8){i+=o(0);for(let e=Math.floor(255/(Math.pow(2,t)-1)),n=e;n<256;n+=e)i+=o(n+256*n+65536*n)}return i+=String.fromCharCode.apply(String,e),window.btoa(i)}function s(e){let t=e.toString(2).split(""),n=t.length;for(let a=0;a<8-n;a++)t.unshift("0");return parseInt(t.reverse().join(""),2)}n(2801),n(541),e.exports={writeBmp:a,mirrorBits:s}},692:function(e){function t(e,t){return(Array(t+1).join("0")+e).slice(-t)}function n(e,n=2){return"0x"+t(e.toString(16),n).toUpperCase()}e.exports={pad:t,toHex:n}},9206:function(e,t,n){"use strict";var a=n(9242),s=n(2483),i=n(1020);const o=(0,i.WB)();var r=o,l=n(7590),d=n(3396);function c(e,t,n,s,i,o){const r=(0,d.up)("TopBar"),l=(0,d.up)("router-view");return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)(r,{showBackButton:!s.isAtHomeView,title:s.viewTitle},null,8,["showBackButton","title"]),(0,d.Wm)(l,null,{default:(0,d.w5)((({Component:e,route:t})=>[(0,d.Wm)(a.uT,{name:t.meta.transition},{default:(0,d.w5)((()=>[((0,d.wg)(),(0,d.j4)((0,d.LL)(e),{onModal:o.openModal},null,40,["onModal"]))])),_:2},1032,["name"])])),_:1})],64)}n(7658);var u=n(7139);const m=e=>((0,d.dD)("data-v-4dfa693b"),e=e(),(0,d.Cn)(),e),h={class:"bar-container"},p={class:"spacer back"},g={class:"spacer title"},f={class:"bar-title"},b={class:"spacer save"},v=m((()=>(0,d._)("p",{class:"body-sm"},"You have made modifications to this ROM.",-1))),w=m((()=>(0,d._)("p",{class:"body-sm"},"Make sure you save any changes you want to keep before unload, or they will be lost!",-1))),y={class:"alert-footer"};function k(e,t,n,a,s,i){const o=(0,d.up)("LargeIcon"),r=(0,d.up)("MinimalButton"),l=(0,d.up)("SaveSection"),c=(0,d.up)("CheckBox"),m=(0,d.up)("StandardButton"),k=(0,d.up)("AlertDialog");return(0,d.wg)(),(0,d.iD)("div",h,[(0,d._)("div",p,[n.showBackButton?((0,d.wg)(),(0,d.j4)(r,{key:0,onClick:i.goHome,size:"large"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"left"}),(0,d.Uk)("Back")])),_:1},8,["onClick"])):(0,d.kq)("",!0)]),(0,d._)("div",g,[(0,d._)("h1",f,(0,u.zw)(n.title),1)]),(0,d._)("div",b,[(0,d.Wm)(l,{romIsLoaded:a.romIsLoaded,romIsAltered:a.romIsAltered,fileName:a.fileName,onSave:i.download,onUnload:i.unload},null,8,["romIsLoaded","romIsAltered","fileName","onSave","onUnload"])]),(0,d.Wm)(k,{show:s.showAlert,title:"Warning!"},{default:(0,d.w5)((()=>[v,w,(0,d.Wm)(c,{onChange:i.checkboxClicked,checked:!1,label:"Don't show this warning again",ref:"alertCheck"},null,8,["onChange"]),(0,d._)("div",y,[(0,d.Wm)(m,{type:"primary",onClick:i.cancel},{default:(0,d.w5)((()=>[(0,d.Uk)("Cancel")])),_:1},8,["onClick"]),(0,d.Wm)(m,{onClick:i.continueClicked},{default:(0,d.w5)((()=>[(0,d.Uk)("Unload ROM")])),_:1},8,["onClick"])])])),_:1},8,["show"])])}function x(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("button",{class:(0,u.C_)(["dir-btn",n.size])},[(0,d.WI)(e.$slots,"default",{},void 0,!0)],2)}var I={name:"MinimallButton",props:{size:String},methods:{getSize(){return"large"==this.size?"large":"small"}}},_=n(89);const C=(0,_.Z)(I,[["render",x],["__scopeId","data-v-286967e3"]]);var M=C;function S(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("button",{class:(0,u.C_)(["std-btn",i.getClass()])},[(0,d.WI)(e.$slots,"default",{},void 0,!0)],2)}var B={name:"StandardButton",props:{size:String,type:String},methods:{getClass(){let e="small";return"large"==this.size&&(e="large"),"primary"==this.type&&(e+=" primary"),e}}};const P=(0,_.Z)(B,[["render",S],["__scopeId","data-v-5d64430f"]]);var O=P;const F={key:0,class:"alert-mask"},D={class:"header-container"},A={class:"title"};function W(e,t,n,s,i,o){return n.show?((0,d.wg)(),(0,d.iD)("div",F,[(0,d._)("div",{class:"alert-container",onClick:t[0]||(t[0]=(0,a.iM)((()=>{}),["stop"]))},[(0,d._)("div",D,[(0,d._)("p",A,(0,u.zw)(n.title),1)]),(0,d.WI)(e.$slots,"default",{},void 0,!0)])])):(0,d.kq)("",!0)}var T={name:"AlertDialog",props:{show:Boolean,title:String},methods:{},updated(){this.show?(document.body.style.overflow="hidden",document.body.style.height="100%"):(document.body.style.overflow="auto",document.body.style.height="auto")}};const N=(0,_.Z)(T,[["render",W],["__scopeId","data-v-0ca90eb7"]]);var E=N;const $=e=>((0,d.dD)("data-v-638741bb"),e=e(),(0,d.Cn)(),e),R={class:"label"},U=$((()=>(0,d._)("span",{class:"box"},null,-1)));function z(e,t,n,s,i,o){return(0,d.wg)(),(0,d.iD)("label",R,[(0,d.Uk)((0,u.zw)(n.label)+" ",1),(0,d.wy)((0,d._)("input",{class:"input",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>o.model=e),ref:"checkbox"},null,512),[[a.e8,o.model]]),U])}var L={name:"CheckBox",props:{label:String,checked:Boolean},data(){return{}},computed:{model:{get(){return this.checked},set(e){this.$emit("change",e)}}}};const j=(0,_.Z)(L,[["render",z],["__scopeId","data-v-638741bb"]]);var V=j;function Z(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("span",{class:(0,u.C_)(["icon",n.type])},null,2)}var H={name:"LargeIcon",props:{type:String}};const q=(0,_.Z)(H,[["render",Z],["__scopeId","data-v-29739d3d"]]);var Y=q;const J={class:"save-section"},X={class:"filename"},K=["title"];function G(e,t,n,a,s,i){const o=(0,d.up)("StandardButton");return(0,d.wg)(),(0,d.iD)("div",J,[n.romIsAltered?((0,d.wg)(),(0,d.j4)(o,{key:0,onClick:t[0]||(t[0]=e=>{this.$emit("save")}),size:"small",type:"primary"},{default:(0,d.w5)((()=>[(0,d.Uk)("Save ROM")])),_:1})):(0,d.kq)("",!0),n.romIsLoaded?((0,d.wg)(),(0,d.j4)(o,{key:1,onClick:t[1]||(t[1]=e=>{this.$emit("unload")}),size:"small",class:"unload"},{default:(0,d.w5)((()=>[(0,d.Uk)("Unload ROM")])),_:1})):(0,d.kq)("",!0),(0,d._)("div",X,[n.romIsLoaded?((0,d.wg)(),(0,d.iD)("p",{key:0,class:"label",title:n.fileName},(0,u.zw)(n.fileName),9,K)):(0,d.kq)("",!0)])])}var Q={name:"SaveSection",components:{StandardButton:O},props:{fileName:String,romIsLoaded:Boolean,romIsAltered:Boolean}};const ee=(0,_.Z)(Q,[["render",G],["__scopeId","data-v-9799abc8"]]);var te=ee,ne=n(2325),ae=n(466),se=n(8145),ie=n(692),oe=n(6849);const re=(0,i.Q_)("mainStore",{state:()=>({romIsLoaded:(0,ae.y$C)("romIsLoaded",!1),romIsAltered:(0,ae.y$C)("romIsAltered",!1),viewTitle:"WPC Edit",fileName:(0,ae.y$C)("fileName",""),maxFullFrameIndex:(0,ae.y$C)("maxFullFrameIndex",0),isAtHomeView:!0,currSpriteIndex:0,currSpriteTableIndex:0,currentRomData:null,spriteTableMap:null,calculatedChecksum:"",storedChecksum:"",versionByte:"",fixupBytes:"",checksumIsValid:!1,exportOption:0,warnings:(0,ae.y$C)("warnings",{load:0,unload:0,save:0}),settings:(0,ae.y$C)("settings",{displayStyle:0,optionalInbetweening:!1,dmdsPerPage:0})}),actions:{setViewTitle(e){this.viewTitle=e},setRomStatus(e){this.romIsLoaded=e},getRomFromCache(){const e=this.fileName;(0,se.get)("currentRomData").then((t=>{null!=t&&this.loadRom(t,e)}))},loadRom(e,t){ne.j.init();const n=ne.j.setRom(e);return n.error||(this.fileName=t,this.romIsLoaded=!0,this.currentRomData=e,(0,se.set)("currentRomData",this.currentRomData),this.spriteTableMap=ne.j.variableSizedImage.indexMap,this.storedChecksum=(0,ie.pad)(ne.j.checksum.stored.toString(16),4).toUpperCase(),this.calculatedChecksum=(0,ie.pad)(ne.j.checksum.calculated.toString(16),4).toUpperCase(),this.fixupBytes=(0,ie.pad)(ne.j.checksum.delta.toString(16),4).toUpperCase(),this.versionByte=(0,ie.pad)((255&ne.j.checksum.stored).toString(16),2).toString(16),this.checksumIsValid=ne.j.checksum.isValid,this.maxFullFrameIndex=ne.j.fullFrameImage.maxImageIndex),n},unloadRom(){(0,se.set)("currentRomData",null),this.currentRomData=null,this.romIsLoaded=!1,this.romIsAltered=!1,this.spriteTableMap=null,this.currSpriteIndex=0,this.currSpriteTableIndex=0,this.currentRomData=null,this.spriteTableMap=null,this.calculatedChecksum=0,this.storedChecksum=0,this.versionByte=0,this.fixupBytes=0,this.checksumIsValid=!1,this.maxFullFrameIndex=0},getFullFrameImageAt(e){return ne.j.fullFrameImage.getPlaneAt(e)},getSpriteAt(e,t){return ne.j.variableSizedImage.table=e,ne.j.variableSizedImage.index=t,ne.j.variableSizedImage.plane},getSpriteCentered(e,t){ne.j.variableSizedImage.table=e,ne.j.variableSizedImage.index=t;const n=ne.j.variableSizedImage.plane,a=Math.floor((128-n.width)/2),s=Math.floor((32-n.height)/2),i=ne.j.variableSizedImage.placeInFullFrame(ne.j.variableSizedImage.plane,a,s);return i},getSpriteAsFullFrame(e,t,n){return ne.j.variableSizedImage.placeInFullFrame(e,t,n)},mergePlanes(e,t){return ne.j.fullFrameImage.mergePlanes(e,t)},updateChecksum(e){const t=ne.j.checksum.update(e);return 1==t.status&&(this.loadRom(t.data,this.fileName),this.romIsAltered=!0),t.status},disableChecksum(){const e=ne.j.checksum.disable();return 1==e.status&&(this.loadRom(e.data,this.fileName),this.romIsAltered=!0),e.status},resetWarnings(){this.warnings.load=0,this.warnings.unload=0,this.warnings.save=0},setExportOption(e){this.exportOption=e},exportAsDataArray(e){for(let n=0;n<e.length;n++)e[n]=(0,oe.mirrorBits)(e[n]);let t="";for(let n=0;n<e.length;n++)t+=(0,ie.toHex)(e[n],2)+",";return t},exportAs1bitBmp(e,t,n,a){for(let r=0;r<e.length;r++)e[r]=(0,oe.mirrorBits)(e[r]);if(t)for(let r=0;r<e.length;r++)e[r]=~e[r];const s=new Uint8Array(e.length),i=Math.ceil(n/8);for(let r=0;r<a;r++){const t=r*i,n=s.length-i-t,a=e.slice(t,t+i);s.set(a,n)}const o=(0,oe.writeBmp)(Array.from(s),1,n,a);return o},downloadRom(){const e=this.fileName.replace(/\.[^/.]+$/,""),t="rom",n=new Date,a="_"+n.getFullYear()+(0,ie.pad)(n.getMonth()+1,2)+(0,ie.pad)(n.getDate(),2)+(0,ie.pad)(n.getHours(),2)+(0,ie.pad)(n.getMinutes(),2)+"_cs"+this.storedChecksum,s=e+a+"."+t;(0,oe.saveDataAsFile)(this.currentRomData,s,"application/octet-stream")}},persist:{storage:localStorage}}),le=re(r);var de={name:"TopBar",props:{title:String,showBackButton:Boolean},setup(){const{romIsLoaded:e,romIsAltered:t,fileName:n,warnings:a}=(0,i.Jk)(le);return{romIsLoaded:e,romIsAltered:t,fileName:n,warnings:a}},data(){return{showAlert:!1,checkBoxIsSelected:!1}},methods:{goHome(){this.$router.push("/wpcedit")},download(){le.downloadRom()},cancel(){this.showAlert=!1},continueClicked(){this.checkBoxIsSelected&&this.warnings.unload++,this.continueUnload()},checkboxClicked(e){1==e?this.checkBoxIsSelected=!0:0==e&&(this.checkBoxIsSelected=!1)},unload(){this.romIsAltered&&this.warnings.unload<1?this.showAlert=!0:this.continueUnload()},continueUnload(){this.showAlert=!1,le.unloadRom(),this.$router.push("/wpcedit")}},components:{MinimalButton:M,StandardButton:O,LargeIcon:Y,SaveSection:te,AlertDialog:E,CheckBox:V}};const ce=(0,_.Z)(de,[["render",k],["__scopeId","data-v-4dfa693b"]]);var ue=ce;const me=re(r);var he={name:"App",components:{TopBar:ue},props:{},setup(){const{viewTitle:e,isAtHomeView:t,romIsLoaded:n,currentRomData:a}=(0,i.Jk)(me);return{viewTitle:e,isAtHomeView:t,romIsLoaded:n,currentRomData:a}},data(){return{showFullFrameModal:!1,showSpriteModal:!1,modalProps:{index:0,table:0}}},methods:{openModal(e){"full"==e.type&&(this.showFullFrameModal=!0,this.modalProps.index=e.index),"sprite"==e.type&&(this.showSpriteModal=!0,this.modalProps.index=e.index,this.modalProps.table=e.table)}},mounted(){this.romIsLoaded&&null==this.currentRomData&&(this.$router.push("/wpcedit"),me.getRomFromCache())}};const pe=(0,_.Z)(he,[["render",c]]);var ge=pe;const fe={class:"scroll-area"},be={class:"main-container"},ve={key:0,class:"navigation"},we={class:"body-sm"},ye={class:"alert-footer"};function ke(e,t,n,a,s,i){const o=(0,d.up)("FeatureButton"),r=(0,d.up)("FileDrop"),l=(0,d.up)("StandardButton"),c=(0,d.up)("AlertDialog"),m=(0,d.up)("DisclaimerModal");return(0,d.wg)(),(0,d.iD)("div",fe,[(0,d._)("div",be,[(0,d.Uk)(" ¨ "),a.romIsLoaded?((0,d.wg)(),(0,d.iD)("div",ve,[(0,d.Wm)(o,{icon:"fullframe",onClick:t[0]||(t[0]=e=>this.$router.push("wpcedit/fullframe"))},{default:(0,d.w5)((()=>[(0,d.Uk)("Full frame graphics")])),_:1}),(0,d.Wm)(o,{icon:"sprites",onClick:t[1]||(t[1]=e=>this.$router.push("wpcedit/sprites"))},{default:(0,d.w5)((()=>[(0,d.Uk)("Sprites and fonts")])),_:1}),(0,d.Wm)(o,{icon:"checksum",onClick:t[2]||(t[2]=e=>this.$router.push("wpcedit/checksum"))},{default:(0,d.w5)((()=>[(0,d.Uk)("Checksum tool")])),_:1}),(0,d.Wm)(o,{icon:"settings",onClick:t[3]||(t[3]=e=>this.$router.push("wpcedit/settings"))},{default:(0,d.w5)((()=>[(0,d.Uk)("Settings")])),_:1})])):(0,d.kq)("",!0),a.romIsLoaded?(0,d.kq)("",!0):((0,d.wg)(),(0,d.j4)(r,{key:1,onLoaded:i.loadRom},null,8,["onLoaded"]))]),(0,d.Wm)(c,{show:s.showError,title:"Error"},{default:(0,d.w5)((()=>[(0,d._)("p",we,(0,u.zw)(s.errorMessage),1),(0,d._)("div",ye,[(0,d.Wm)(l,{type:"primary",onClick:i.okClicked,class:"alert-ok-btn"},{default:(0,d.w5)((()=>[(0,d.Uk)("OK")])),_:1},8,["onClick"])])])),_:1},8,["show"]),(0,d.Wm)(m,{show:s.showDisclaimer,onAgree:i.agreeClicked,onDisagree:i.disagreeClicked},null,8,["show","onAgree","onDisagree"])])}const xe=e=>((0,d.dD)("data-v-6e9a6110"),e=e(),(0,d.Cn)(),e),Ie={class:"wrapper"},_e=xe((()=>(0,d._)("div",{class:"decoration up"},null,-1))),Ce={class:"drop-container"},Me=(0,d.uE)('<div class="file-drop" data-v-6e9a6110><div class="label" data-v-6e9a6110>Drop a WPC Pinball game ROM file here</div><div class="symbol" data-v-6e9a6110><div class="arrow" data-v-6e9a6110></div><div class="plate" data-v-6e9a6110></div></div></div>',1),Se=xe((()=>(0,d._)("div",{class:"decoration down"},null,-1)));function Be(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("div",Ie,[_e,(0,d._)("div",Ce,[Me,(0,d._)("input",{type:"file",ref:"romfile",onChange:t[0]||(t[0]=(...e)=>i.loaded&&i.loaded(...e)),title:""},null,544)]),Se])}var Pe={name:"FileDrop",props:{},methods:{loaded(){const e=this.$refs.romfile.files[0];this.$emit("loaded",e)}}};const Oe=(0,_.Z)(Pe,[["render",Be],["__scopeId","data-v-6e9a6110"]]);var Fe=Oe;const De={class:"feature-btn-outer"},Ae={class:"label"};function We(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("div",{class:"feature-btn",onClick:t[0]||(t[0]=t=>e.$emit("click"))},[(0,d._)("div",De,[(0,d._)("div",{class:(0,u.C_)(["feature-btn-inner",n.icon])},null,2)]),(0,d._)("div",Ae,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])])}var Te={name:"FeatureButton",props:{icon:String}};const Ne=(0,_.Z)(Te,[["render",We],["__scopeId","data-v-5cba4a9f"]]);var Ee=Ne;const $e=e=>((0,d.dD)("data-v-43d280fe"),e=e(),(0,d.Cn)(),e),Re=$e((()=>(0,d._)("div",{class:"modal-body"},[(0,d._)("p",{class:"body-sm"},[(0,d.Uk)("This software provides mechanisms for viewing and editing the contents of certain pinball machine ROM images. "),(0,d._)("span",{class:"highlight"},"It is up to you to determine if this software can be used without violating any agreements"),(0,d.Uk)(" that prohibits you from using this software. For example there may have been an agreement you agreed to when you obtained the ROM image. Additionally, you may be bound to an implicit agreement if your pinball machine came with a manual. The back cover of the manual may contain verbage that may make the use of this software a violation of the agreement.")]),(0,d._)("p",{class:"body-sm"},[(0,d.Uk)("By clicking the 'I understand and agree' button below, you acknowledge that you have read the text in this dialog box and accept responsibility for using this software in an appropriate manner. You also recognize that "),(0,d._)("span",{class:"highlight"},"modifying the contents of the ROM image can be potentially catastrophic"),(0,d.Uk)(" to your pinball machine. For example if you change a byte from a value of 5 to 200 and this byte in the ROM happened to be the number of milliseconds to energize a flasher, then this example ROM modification would cause the flasher bulb to burn out when the game tries to energize the flasher.")]),(0,d._)("p",{class:"body-sm"},[(0,d.Uk)("Please do not distribute modified ROM images that may have been generated by this software or from any other source. This software is intended for personal use only and "),(0,d._)("span",{class:"highlight"},"may not be used in a commercial environment"),(0,d.Uk)(". Please click 'I do not agree' if you feel that using this software is legally, morally, or ethically wrong.")]),(0,d._)("p",{class:"body-sm"},[(0,d._)("span",{class:"highlight"},"The DMD images that this software extracts from the ROM is copyrighted material."),(0,d.Uk)(" Please treat the images produced by this software as you would treat a photograph that belonged to somebody else. It is advised that you do not use any of the images on a web page, auction page, or any such public posting.")]),(0,d._)("p",{class:"body-sm"},"Additionally some game ROMs contain private images of the designers loved ones and family members. Please respect the privacy of these individuals and do NOT reproduce, copy or otherwise make public such images. ")],-1))),Ue={class:"button-container"};function ze(e,t,n,a,s,i){const o=(0,d.up)("ModalHeader"),r=(0,d.up)("StandardButton"),l=(0,d.up)("ModalFooter"),c=(0,d.up)("BaseModal");return(0,d.wg)(),(0,d.j4)(c,{show:n.show},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{stepBtns:!1,closeBtn:!1,title:"Important!"}),Re,(0,d.Wm)(l,null,{default:(0,d.w5)((()=>[(0,d._)("div",Ue,[(0,d.Wm)(r,{onClick:t[0]||(t[0]=e=>{this.$emit("agree")}),size:"small",class:"agree-btn"},{default:(0,d.w5)((()=>[(0,d.Uk)("I understand and agree")])),_:1}),(0,d.Wm)(r,{onClick:t[1]||(t[1]=e=>{this.$emit("disagree")}),size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("I do not agree")])),_:1})])])),_:1})])),_:1},8,["show"])}function Le(e,t,n,s,i,o){return n.show?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"modal-mask",onClick:t[1]||(t[1]=t=>e.$emit("close"))},[(0,d._)("div",{class:"modal-container",onClick:t[0]||(t[0]=(0,a.iM)((()=>{}),["stop"]))},[(0,d.WI)(e.$slots,"default",{},void 0,!0)])])):(0,d.kq)("",!0)}var je={name:"BaseModal",props:{show:Boolean},methods:{},updated(){this.show?(document.body.style.overflow="hidden",document.body.style.height="100%"):(document.body.style.overflow="auto",document.body.style.height="auto")}};const Ve=(0,_.Z)(je,[["render",Le],["__scopeId","data-v-e5d667d6"]]);var Ze=Ve;const He={class:"header-container"},qe={class:"area left-area"},Ye={key:0,class:"step-buttons"},Je={class:"area middle-area"},Xe={class:"title"},Ke={class:"area right-area"},Ge={key:0,class:"close-area"};function Qe(e,t,n,a,s,i){const o=(0,d.up)("LargeIcon"),r=(0,d.up)("MinimalButton"),l=(0,d.up)("SmallIcon");return(0,d.wg)(),(0,d.iD)("div",He,[(0,d._)("div",qe,[n.stepBtns?((0,d.wg)(),(0,d.iD)("div",Ye,[(0,d.Wm)(r,{onClick:t[0]||(t[0]=e=>this.$emit("prev")),size:"large"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"left"})])),_:1}),(0,d.Wm)(r,{onClick:t[1]||(t[1]=e=>this.$emit("next")),size:"large"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"right"})])),_:1}),(0,d.Wm)(r,{onClick:t[2]||(t[2]=e=>this.$emit("prev2")),size:"small",class:"fast-btn"},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{type:"double-left"})])),_:1}),(0,d.Wm)(r,{onClick:t[3]||(t[3]=e=>this.$emit("next2")),size:"small",class:"fast-btn"},{default:(0,d.w5)((()=>[(0,d.Wm)(l,{type:"double-right"})])),_:1})])):(0,d.kq)("",!0)]),(0,d._)("div",Je,[(0,d._)("p",Xe,(0,u.zw)(n.title),1)]),(0,d._)("div",Ke,[n.closeBtn?((0,d.wg)(),(0,d.iD)("div",Ge,[(0,d.Wm)(r,{onClick:t[4]||(t[4]=t=>e.$emit("close")),size:"large"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"close"})])),_:1})])):(0,d.kq)("",!0)])])}function et(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("span",{class:(0,u.C_)(["icon",n.type])},null,2)}var tt={name:"SmallIcon",props:{type:String}};const nt=(0,_.Z)(tt,[["render",et],["__scopeId","data-v-4819d72e"]]);var at=nt,st={name:"ModalHeader",components:{MinimalButton:M,LargeIcon:Y,SmallIcon:at},props:{title:String,closeBtn:Boolean,stepBtns:Boolean},methods:{}};const it=(0,_.Z)(st,[["render",Qe],["__scopeId","data-v-4000d170"]]);var ot=it;const rt={class:"footer"};function lt(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("div",rt,[(0,d.WI)(e.$slots,"default",{},void 0,!0)])}var dt={name:"ExportSection"};const ct=(0,_.Z)(dt,[["render",lt],["__scopeId","data-v-576a2de2"]]);var ut=ct,mt={name:"SpriteModal",components:{BaseModal:Ze,ModalHeader:ot,ModalFooter:ut,StandardButton:O},props:{show:Boolean}};const ht=(0,_.Z)(mt,[["render",ze],["__scopeId","data-v-43d280fe"]]);var pt=ht;const gt=re(r);var ft={name:"HomeView",components:{FileDrop:Fe,FeatureButton:Ee,DisclaimerModal:pt,AlertDialog:E,StandardButton:O},props:{},data(){return{showDisclaimer:!1,tempFile:null,showError:!1,errorMessage:""}},setup(){const{romIsLoaded:e,warnings:t}=(0,i.Jk)(gt);return{romIsLoaded:e,warnings:t}},beforeRouteEnter(){gt.romIsLoaded?gt.setViewTitle("Home"):gt.setViewTitle("Load ROM"),gt.isAtHomeView=!0},updated(){gt.romIsLoaded?gt.setViewTitle("Home"):gt.setViewTitle("Load ROM")},methods:{agreeClicked(){null!=this.tempFile&&this.loadRom(this.tempFile),this.warnings.load++,this.showDisclaimer=!1},disagreeClicked(){this.tempFile=null,gt.unloadRom(),this.showDisclaimer=!1},okClicked(){this.showError=!1},loadRom(e){const t=new FileReader;t.addEventListener("loadend",(()=>{if(t.result){const n=new Uint8Array(t.result),a=gt.loadRom(n,e.name);a.error?(this.errorMessage=a.msg,this.showError=!0,gt.unloadRom()):this.warnings.load<1&&(this.tempFile=e,this.showDisclaimer=!0)}})),t.readAsArrayBuffer(e)}}};const bt=(0,_.Z)(ft,[["render",ke],["__scopeId","data-v-ffbf7b7e"]]);var vt=bt;const wt={class:"scroll-area"},yt={class:"main-container"},kt={class:"content-wrapper"};function xt(e,t,n,a,s,i){const o=(0,d.up)("PaginationBlock"),r=(0,d.up)("FullFrameItem"),l=(0,d.up)("FullFrameModal");return(0,d.wg)(),(0,d.iD)("div",wt,[(0,d._)("div",yt,[(0,d._)("div",kt,[a.settings.dmdsPerPage>0?((0,d.wg)(),(0,d.j4)(o,{key:0,class:"pagination",onNext:i.nextPage,onPrev:i.prevPage,onStart:i.startPage},null,8,["onNext","onPrev","onStart"])):(0,d.kq)("",!0),((0,d.wg)(),(0,d.iD)("div",{class:"fullframe-list",key:s.currPage},[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(i.pageLength,(e=>((0,d.wg)(),(0,d.j4)(r,{image:i.getFrame(e-1),key:e,index:e-1,onOpen:i.openModal},null,8,["image","index","onOpen"])))),128))]))])]),(0,d.Wm)(l,{show:s.showModal,onClose:t[0]||(t[0]=e=>s.showModal=!1),index:s.activeIndex},null,8,["show","index"])])}const It={class:"modal-body"},_t={class:"sub-dmds blend"},Ct={class:"sub-dmds merge"},Mt={class:"plane plane0"};function St(e,t,n,a,s,i){const o=(0,d.up)("ModalHeader"),r=(0,d.up)("MainDmd"),l=(0,d.up)("SubDmd"),c=(0,d.up)("CheckBox"),u=(0,d.up)("ExportSection"),m=(0,d.up)("ModalFooter"),h=(0,d.up)("BaseModal");return(0,d.wg)(),(0,d.j4)(h,{show:n.show,onClose:t[13]||(t[13]=t=>e.$emit("close"))},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{stepBtns:!0,closeBtn:!0,title:i.title,onNext:t[0]||(t[0]=e=>i.goNext()),onPrev:t[1]||(t[1]=e=>i.goPrev()),onNext2:t[2]||(t[2]=e=>i.goN2()),onPrev2:t[3]||(t[3]=e=>i.goP2()),onClose:t[4]||(t[4]=t=>e.$emit("close"))},null,8,["title"]),(0,d._)("div",It,[(0,d.Wm)(r,{image0:i.image0(),image1:i.image1(),index:i.planeIndices.current,ref:"main"},null,8,["image0","image1","index"]),(0,d._)("div",_t,[(0,d.Wm)(l,{class:"plane plane0",title:this.currPlaneTitle,isEnabled:!0,image:i.mainImage()},null,8,["title","image"]),(0,d.Wm)(l,{class:"plane plane1",checkbox:this.blendPlaneLabel,image:i.blendImage(),isEnabled:this.doBlend,navBtns:!0,onNext:t[5]||(t[5]=e=>i.goToNextBlendPlane()),onPrev:t[6]||(t[6]=e=>i.goToPrevBlendPlane()),onEnabled:i.setBlendStatus},null,8,["checkbox","image","isEnabled","onEnabled"])]),(0,d._)("div",Ct,[(0,d._)("div",Mt,[(0,d.Wm)(l,{checkbox:this.merge0Label,image:i.merge0Image(),isEnabled:this.doMerge0,navBtns:!0,onNext:t[7]||(t[7]=e=>i.goToNextMerge0Plane()),onPrev:t[8]||(t[8]=e=>i.goToPrevMerge0Plane()),onEnabled:i.setMerge0Status},null,8,["checkbox","image","isEnabled","onEnabled"]),a.settings.optionalInbetweening?((0,d.wg)(),(0,d.j4)(c,{key:0,class:"in-between",onChange:i.setBetween0Status,checked:!0,label:"Also apply the planes in between",ref:"inBetween0"},null,8,["onChange"])):(0,d.kq)("",!0)]),(0,d._)("div",null,[(0,d.Wm)(l,{class:"plane plane1",checkbox:this.merge1Label,image:i.merge1Image(),isEnabled:this.doMerge1,navBtns:!0,onNext:t[9]||(t[9]=e=>i.goToNextMerge1Plane()),onPrev:t[10]||(t[10]=e=>i.goToPrevMerge1Plane()),onEnabled:i.setMerge1Status},null,8,["checkbox","image","isEnabled","onEnabled"]),a.settings.optionalInbetweening?((0,d.wg)(),(0,d.j4)(c,{key:0,class:"in-between",onChange:i.setBetween1Status,checked:!0,label:"Also apply the planes in between",ref:"inBetween1"},null,8,["onChange"])):(0,d.kq)("",!0)])])]),(0,d.Wm)(m,null,{default:(0,d.w5)((()=>[(0,d.Wm)(u,{onExportMain:t[11]||(t[11]=e=>i.exportCurrentFrame(0)),onExportBlend:t[12]||(t[12]=e=>i.exportCurrentFrame(1)),options:s.options},null,8,["options"])])),_:1})])),_:1},8,["show"])}const Bt=e=>((0,d.dD)("data-v-e9ef12ce"),e=e(),(0,d.Cn)(),e),Pt={class:"export-section"},Ot={class:"option-section"},Ft=Bt((()=>(0,d._)("label",{for:"exportselect",class:"label-sm"},"Export as:",-1)));function Dt(e,t,n,a,s,i){const o=(0,d.up)("SelectInput"),r=(0,d.up)("StandardButton");return(0,d.wg)(),(0,d.iD)("div",Pt,[(0,d._)("div",Ot,[Ft,(0,d.Wm)(o,{name:"exportselect",options:n.options,class:"export-select",onChange:i.changeSetting},null,8,["options","onChange"])]),(0,d.Wm)(r,{onClick:t[0]||(t[0]=e=>{this.$emit("export-main")}),size:"small",class:"btn"},{default:(0,d.w5)((()=>[(0,d.Uk)("Export main plane")])),_:1}),(0,d.Wm)(r,{onClick:t[1]||(t[1]=e=>{this.$emit("export-blend")}),size:"small",class:"btn"},{default:(0,d.w5)((()=>[(0,d.Uk)("Export blend plane")])),_:1})])}const At=e=>((0,d.dD)("data-v-5d9cf18a"),e=e(),(0,d.Cn)(),e),Wt={class:"select"},Tt=["name"],Nt=["value","selected"],Et=At((()=>(0,d._)("span",{class:"focus"},null,-1)));function $t(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("div",Wt,[(0,d._)("select",{name:n.name,onChange:t[0]||(t[0]=(...e)=>i.changeSelection&&i.changeSelection(...e)),ref:"select"},[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.options,((e,t)=>((0,d.wg)(),(0,d.iD)("option",{key:t,value:e.value,selected:e.selected},(0,u.zw)(e.label),9,Nt)))),128))],40,Tt),Et])}var Rt={name:"SelectInput",props:{name:String,options:Array},methods:{changeSelection(){const e=this.$refs.select;this.$emit("change",{value:e.value})}}};const Ut=(0,_.Z)(Rt,[["render",$t],["__scopeId","data-v-5d9cf18a"]]);var zt=Ut;const Lt=re(r);var jt={name:"ExportSection",components:{StandardButton:O,SelectInput:zt},props:{options:Object},setup(){const{exportOption:e}=(0,i.Jk)(Lt);return{exportOption:e}},methods:{changeSetting(e){void 0!=e.value&&Lt.setExportOption(Number(e.value))}}};const Vt=(0,_.Z)(jt,[["render",Dt],["__scopeId","data-v-e9ef12ce"]]);var Zt=Vt;const Ht={class:"dmd-container",ref:"container"},qt={key:0,ref:"dmd",width:"1024",height:"256",class:"dmd"};function Yt(e,t,n,a,s,i){return(0,d.wg)(),(0,d.iD)("div",Ht,[0!=a.settings.displayStyle?((0,d.wg)(),(0,d.iD)("canvas",qt,null,512)):(0,d.kq)("",!0)],512)}var Jt=n(8127),Xt=n(1915),Kt=n(2761);const Gt=re(r);var Qt={name:"MainDmd",props:{image0:Uint8Array,image1:Uint8Array,index:Number},data(){return{pixiApp:new Jt.MxU({background:"#0C0C0C",width:1056,height:288}),doExport:!1}},setup(){const{settings:e}=(0,i.Jk)(Gt);return{settings:e}},methods:{drawImage(){0==this.settings.displayStyle?this.drawPlasmaStyle():this.drawPlain(this.settings.displayStyle)},drawPlasmaStyle(){const e=1024,t=256,n=8,a=2*n,s=4096,i=this.getDotTeture(0),o=this.getDotTeture(1),r=this.getDotTeture(2),l=this.getDotTeture(3),d=Jt.xEZ.from(i),c=Jt.xEZ.from(o),u=Jt.xEZ.from(r),m=Jt.xEZ.from(l),h=this.$refs.container;h.appendChild(this.pixiApp.view),this.pixiApp.view.style.width="100%";const p=new Jt.W20;this.pixiApp.stage.addChild(p);var g=new Jt.TCu;g.beginFill(252447756),g.drawRect(0,0,e+2*a,t+2*a),g.zIndex=1,p.addChild(g);for(let y=0;y<s;y++){let e=0;e=this.getDotLevel(this.image0,this.image1,y);let t=new Jt.jyi(d);1==e?t=new Jt.jyi(m):.6==e?t=new Jt.jyi(u):.4==e&&(t=new Jt.jyi(c)),t.width=8,t.height=8,t.x=y%128*n+a,t.y=Math.floor(y/128)*n+a,t.zIndex=1e3,p.addChild(t)}const f=new Jt.T01(1.5),b=new Xt.N({blur:2,brightness:1.2,threshold:.15,bloomScale:.3}),v=new Xt.N({blur:6,brightness:1,threshold:.25,bloomScale:1.1}),w=new Kt.U({blue:.55,green:.75,gamma:.8,saturation:.85});this.pixiApp.stage.filters=[f,b,v,w]},drawPlain(e){let t="225, 225, 225";1!=e&&2!=e||(t="220, 133, 33");const n=this.$refs.dmd,a=8,s=4096,i=n.getContext("2d");i.clearRect(0,0,n.width,n.height),i.beginPath(),i.rect(0,0,1024,256),i.fillStyle="rgba(0,0,0,1)",i.fill();for(let o=0;o<s;o++){const n=a/2,s=o%128*a,r=Math.floor(o/128)*a,l=this.getDotLevel(this.image0,this.image1,o);i.beginPath(),1==e||3==e?i.arc(s+n,r+n,.9*n,0,2*Math.PI,!1):i.rect(s,r,a,a),i.fillStyle=`rgba(${t}, ${1*l})`,i.fill()}},getDotLevel(e,t,n){const a=128,s=n%a,i=Math.floor(n/8),o=s%8,r=(255&e[i])>>o&1,l=(255&t[i])>>o&1;let d=.6*r+.4*l;return d},getDotTeture(e){switch(e){case 1:return n(373);case 2:return n(7528);case 3:return n(7870);default:return n(659)}},downloadPng(){if(0==this.settings.displayStyle){this.pixiApp.render();const e=this.pixiApp.renderer.plugins.extract.base64();e.then((e=>{let t=document.createElement("a");t.href=e;let n="plane.png";this.index&&(n="plane"+this.index+".png"),t.download=n,t.style.display="none",document.body.appendChild(t),t.click(),t.parentNode.removeChild(t)}))}else{const e=this.$refs.dmd,t=e.toDataURL("image/png");let n=document.createElement("a");n.href=t;let a="plane.png";this.index&&(a="plane"+this.index+".png"),n.download=a,n.style.display="none",document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)}}},mounted(){this.drawImage()},updated(){this.drawImage()},beforeUpdate(){},beforeUnmount(){this.pixiApp.destroy()}};const en=(0,_.Z)(Qt,[["render",Yt],["__scopeId","data-v-23c2aa1a"]]);var tn=en;const nn={class:"controls"},an={key:0,class:"title"},sn={key:2,class:"nav-btns"},on={class:"dmd-container"},rn={ref:"dmd",width:"512",height:"128",class:"dmd"};function ln(e,t,n,a,s,i){const o=(0,d.up)("CheckBox"),r=(0,d.up)("SmallIcon"),l=(0,d.up)("MinimalButton");return(0,d.wg)(),(0,d.iD)("div",null,[(0,d._)("div",nn,[n.title?((0,d.wg)(),(0,d.iD)("p",an,(0,u.zw)(n.title),1)):(0,d.kq)("",!0),n.checkbox?((0,d.wg)(),(0,d.j4)(o,{key:1,onChange:i.checked,checked:n.isEnabled,label:n.checkbox,ref:"checkbox"},null,8,["onChange","checked","label"])):(0,d.kq)("",!0),n.navBtns?((0,d.wg)(),(0,d.iD)("div",sn,[(0,d.Wm)(l,{onClick:t[0]||(t[0]=e=>{this.$emit("prev")}),size:"small"},{default:(0,d.w5)((()=>[(0,d.Wm)(r,{type:"left"}),(0,d.Uk)("Previous")])),_:1}),(0,d.Wm)(l,{onClick:t[1]||(t[1]=e=>{this.$emit("next")}),size:"small",class:"btn-next"},{default:(0,d.w5)((()=>[(0,d.Uk)("Next"),(0,d.Wm)(r,{type:"right"})])),_:1})])):(0,d.kq)("",!0)]),(0,d._)("div",on,[(0,d._)("canvas",rn,null,512)])])}var dn={name:"SubDmd",components:{CheckBox:V,MinimalButton:M,SmallIcon:at},props:{image:Uint8Array,title:String,checkbox:String,navBtns:Boolean,isEnabled:Boolean},methods:{drawImage(){const e=4,t=4096,n=this.$refs.dmd,a=n.getContext("2d");a.clearRect(0,0,n.width,n.height);let s="130, 100, 80";this.isEnabled&&(s="220, 133, 33");for(let i=0;i<t;i++){const t=i%128*e+e/2,n=Math.floor(i/128)*e+e/2,o=this.getDotValue(this.image,i);a.beginPath(),a.arc(t,n,e/2*.9,0,2*Math.PI,!1),a.fillStyle=`rgba(${s}, ${o})`,a.fill()}},getDotValue(e,t){const n=128,a=t%n,s=Math.floor(t/8),i=a%8,o=(255&e[s])>>i&1;return o},checked(e){this.$emit("enabled",e)}},mounted(){this.drawImage()},updated(){this.drawImage()}};const cn=(0,_.Z)(dn,[["render",ln],["__scopeId","data-v-313a6c9e"]]);var un=cn;const mn=re(r);var hn={name:"SpriteModal",components:{BaseModal:Ze,ModalHeader:ot,ModalFooter:ut,ExportSection:Zt,MainDmd:tn,SubDmd:un,CheckBox:V},setup(){const{exportOption:e,settings:t}=(0,i.Jk)(mn);return{exportOption:e,settings:t}},data(){const e=new Array,t=["PNG image from render","Monochrome BMP image","Monochrome BMP image (inverted)","Raw byte array"];for(let n=0;n<t.length;n++){const a=n==this.exportOption;e.push({value:n,label:t[n],selected:a})}return{doBlend:!0,doMerge0:!1,doMerge1:!1,offset:0,blendOffset:1,merge0Offset:2,merge1Offset:3,doInBetween0:!0,doInBetween1:!0,exportMainDmd:-1,options:e}},props:{show:Boolean,index:Number},computed:{planeIndices(){const e=Math.max(this.index+this.offset,0);return{current:e,blend:Math.max(e+this.blendOffset,0),merge0:Math.max(e+this.merge0Offset,0),merge1:Math.max(e+this.merge1Offset,0)}},currPlaneTitle(){return`This plane, index ${this.planeIndices.current}`},blendPlaneLabel(){return`Blend with index ${this.planeIndices.blend}`},merge0Label(){return`Apply index ${this.planeIndices.merge0} on top`},merge1Label(){return`Apply index ${this.planeIndices.merge1} on top`},title(){return`Image ${(0,ie.toHex)(mn.getFullFrameImageAt(this.planeIndices.current).address,6)}`},subTitle(){return`Table ${(0,ie.toHex)(mn.getFullFrameImageAt(this.planeIndices.current).tableAddress,6)}`}},methods:{image0(){return this.mainImage()},image1(){return this.doBlend?this.blendImage():this.mainImage()},mainImage(){const e=this.planeIndices;if(this.doMerge0){let t=mn.getFullFrameImageAt(e.current).image;if(this.doInBetween0){for(let n=1;n<=Math.abs(e.merge0-e.current);n++)if(!this.doBlend||n%2==0){const a=mn.getFullFrameImageAt(e.current+n);t=mn.mergePlanes(t,a)}}else{const n=mn.getFullFrameImageAt(e.merge0);t=mn.mergePlanes(t,n)}return t}return mn.getFullFrameImageAt(e.current).image},blendImage(){const e=this.planeIndices;let t=mn.getFullFrameImageAt(e.blend).image;if(this.doMerge1){if(this.doInBetween1){for(let n=1;n<=Math.abs(e.merge1-e.current);n++)if(!this.doBlend||n%2==1){const a=mn.getFullFrameImageAt(e.current+n);t=mn.mergePlanes(t,a)}}else{const n=mn.getFullFrameImageAt(e.merge1);t=mn.mergePlanes(t,n)}return t}return mn.getFullFrameImageAt(e.blend).image},merge0Image(){const e=this.planeIndices;return mn.getFullFrameImageAt(e.merge0).image},merge1Image(){const e=this.planeIndices;return mn.getFullFrameImageAt(e.merge1).image},setBlendStatus(e){1==e?this.doBlend=!0:0==e&&(this.doBlend=!1)},setMerge0Status(e){1==e?this.doMerge0=!0:0==e&&(this.doMerge0=!1)},setMerge1Status(e){1==e?this.doMerge1=!0:0==e&&(this.doMerge1=!1)},setBetween0Status(e){1==e?this.doInBetween0=!0:0==e&&(this.doInBetween0=!1)},setBetween1Status(e){1==e?this.doInBetween1=!0:0==e&&(this.doInBetween1=!1)},goToNextBlendPlane(){this.blendOffset++},goToPrevBlendPlane(){this.blendOffset--},goToNextMerge0Plane(){let e=1;this.doInBetween0&&this.doBlend&&(e=2),this.merge0Offset+=e,this.doBlend&&(this.merge1Offset+=e)},goToPrevMerge0Plane(){let e=1;this.doInBetween0&&this.doBlend&&(e=2),this.merge0Offset>0&&(this.merge0Offset-=e,this.doBlend&&(this.merge1Offset-=e))},goToNextMerge1Plane(){let e=1;this.doInBetween1&&this.doBlend&&(e=2),this.merge1Offset+=e,this.doBlend&&(this.merge0Offset+=e)},goToPrevMerge1Plane(){let e=1;this.doInBetween1&&this.doBlend&&(e=2),this.merge1Offset>this.blendOffset&&(this.merge1Offset-=e,this.doBlend&&(this.merge0Offset-=e))},goNext(){this.offset++,this.setInitValues()},goPrev(){this.planeIndices.current>0&&this.offset--,this.setInitValues()},goN2(){this.offset+=2,this.setInitValues()},goP2(){this.planeIndices.current>0&&(this.offset-=2),this.setInitValues()},setInitValues(){this.doMerge0=!1,this.doMerge1=!1,this.blendOffset=1,this.merge0Offset=2,this.merge1Offset=3},exportCurrentFrame(e){let t=this.mainImage(),n=this.planeIndices.current;if(1==e&&(t=this.blendImge(),n=this.planeIndices.blend),0==this.exportOption)this.$refs.main.downloadPng();else if(3==this.exportOption){let e=mn.exportAsDataArray(t),a=document.createElement("a");a.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e);const s="plane"+n+".txt";a.download=s,a.style.display="none",document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)}else if(1==this.exportOption||2==this.exportOption){let e=!1;2==this.exportOption&&(e=!0);const a=mn.exportAs1bitBmp(t,e,128,32);let s=document.createElement("a");s.href="data:image/bmp;base64,"+a;const i="plane"+n+".bmp";s.download=i,s.style.display="none",document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)}}},updated(){this.offset=0,this.setInitValues()}};const pn=(0,_.Z)(hn,[["render",St],["__scopeId","data-v-237a626c"]]);var gn=pn;const fn={class:"pagination"};function bn(e,t,n,a,s,i){const o=(0,d.up)("SmallIcon"),r=(0,d.up)("StandardButton"),l=(0,d.up)("MinimalButton");return(0,d.wg)(),(0,d.iD)("div",fn,[(0,d.Wm)(r,{onClick:t[0]||(t[0]=e=>this.$emit("prev")),size:"small"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"left"}),(0,d.Uk)(" Previous page")])),_:1}),(0,d.Wm)(r,{onClick:t[1]||(t[1]=e=>this.$emit("next")),size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("Next page"),(0,d.Wm)(o,{type:"right"})])),_:1}),(0,d.Wm)(l,{onClick:t[2]||(t[2]=e=>this.$emit("start")),size:"small"},{default:(0,d.w5)((()=>[(0,d.Uk)("Go to first page")])),_:1})])}var vn={name:"PaginationBlock",components:{MinimalButton:M,StandardButton:O,SmallIcon:at}};const wn=(0,_.Z)(vn,[["render",bn],["__scopeId","data-v-d63ffdfc"]]);var yn=wn;const kn=re(r);var xn={name:"FullFrameView",components:{FullFrameItem:(0,d.RC)((()=>n.e(57).then(n.bind(n,7057)))),PaginationBlock:yn,FullFrameModal:gn},props:{},setup(){const{maxFullFrameIndex:e,settings:t}=(0,i.Jk)(kn);return{maxFullFrameIndex:e,settings:t}},data(){return{activeIndex:0,currPage:0,showModal:!1}},computed:{pageLength(){const e=Number(this.settings.dmdsPerPage);return 0==e?this.maxFullFrameIndex:1==e?16:2==this.settings.dmdsPerPage?24:32}},methods:{openModal(e){const t=this.currPage*this.pageLength;e+=t,this.activeIndex=e,this.showModal=!0},getFrame(e){const t=this.currPage*this.pageLength;return e+=t,kn.getFullFrameImageAt(e).image},nextPage(){this.currPage++},prevPage(){this.currPage=Math.max(0,this.currPage-1)},startPage(){this.currPage=0}},beforeRouteEnter(){kn.setViewTitle("Full frame graphics"),kn.isAtHomeView=!1}};const In=(0,_.Z)(xn,[["render",xt],["__scopeId","data-v-da6b974e"]]);var _n=In;const Cn={class:"scroll-area"},Mn={class:"content-wrapper"};function Sn(e,t,n,a,s,i){const o=(0,d.up)("PaginationBlock"),r=(0,d.up)("SpriteList"),l=(0,d.up)("SpriteModal");return(0,d.wg)(),(0,d.iD)("div",Cn,[((0,d.wg)(),(0,d.iD)("div",{class:"main-container",key:s.currPage},[(0,d._)("div",Mn,[a.settings.dmdsPerPage>0?((0,d.wg)(),(0,d.j4)(o,{key:0,class:"pagination",onNext:i.nextPage,onPrev:i.prevPage,onStart:i.startPage},null,8,["onNext","onPrev","onStart"])):(0,d.kq)("",!0),((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(i.tableMap,((e,t)=>((0,d.wg)(),(0,d.j4)(r,{key:i.tableIndex(e.index),table:e,"table-index":i.tableIndex(t),onOpenModal:i.openModal},{default:(0,d.w5)((()=>[(0,d.Uk)(" Sprite ")])),_:2},1032,["table","table-index","onOpenModal"])))),128))])])),(0,d.Wm)(l,{show:s.showModal,onClose:t[0]||(t[0]=e=>s.showModal=!1),index:s.activeIndex,table:s.activeTable},null,8,["show","index","table"])])}const Bn={class:"sprite-list"},Pn={class:"label-md table-header"};function On(e,t,n,a,s,i){const o=(0,d.up)("SpriteItem");return(0,d.wg)(),(0,d.iD)("div",Bn,[(0,d._)("p",Pn,"Table "+(0,u.zw)(n.tableIndex),1),((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.table,(e=>((0,d.wg)(),(0,d.j4)(o,{image:i.getFrame(e),key:e,index:e,tableIndex:n.tableIndex,onOpen:i.openModal},null,8,["image","index","tableIndex","onOpen"])))),128))])}const Fn=re(r);var Dn={name:"SpriteList",components:{SpriteItem:(0,d.RC)((()=>n.e(264).then(n.bind(n,8264))))},props:{show:Boolean,table:Array,tableIndex:Number,tableAddress:String},data(){return{}},methods:{openModal(e){this.$emit("openModal",{index:e.index,tableIndex:e.tableIndex})},getFrame(e){return Fn.getSpriteCentered(this.tableIndex,e)}}};const An=(0,_.Z)(Dn,[["render",On],["__scopeId","data-v-f8060dcc"]]);var Wn=An;const Tn={class:"modal-body"},Nn={class:"sub-dmds"};function En(e,t,n,a,s,i){const o=(0,d.up)("ModalHeader"),r=(0,d.up)("MainDmd"),l=(0,d.up)("SubDmd"),c=(0,d.up)("OffsetControl"),u=(0,d.up)("ExportSection"),m=(0,d.up)("ModalFooter"),h=(0,d.up)("BaseModal");return(0,d.wg)(),(0,d.j4)(h,{show:n.show,onClose:t[9]||(t[9]=t=>e.$emit("close"))},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{stepBtns:!0,closeBtn:!0,title:i.title,onNext:t[0]||(t[0]=e=>i.goNext()),onPrev:t[1]||(t[1]=e=>i.goPrev()),onNext2:t[2]||(t[2]=e=>i.goN2()),onPrev2:t[3]||(t[3]=e=>i.goP2()),onClose:t[4]||(t[4]=t=>e.$emit("close"))},null,8,["title"]),(0,d._)("div",Tn,[(0,d.Wm)(r,{image0:i.image0(),image1:i.image1(),index:i.planeIndices.current,ref:"main"},null,8,["image0","image1","index"]),(0,d._)("div",Nn,[(0,d._)("div",null,[(0,d.Wm)(l,{class:"plane plane0",title:this.currPlaneTitle,isEnabled:!0,image:i.image0()},null,8,["title","image"]),(0,d.Wm)(c,{onMoveX:i.moveSprite0X,onMoveY:i.moveSprite0Y,xOffset:s.xOffset0,yOffset:s.yOffset0},null,8,["onMoveX","onMoveY","xOffset","yOffset"])]),(0,d._)("div",null,[(0,d.Wm)(l,{class:"plane plane1",checkbox:this.blendPlaneLabel,image:i.blendImage(),isEnabled:this.doBlend,navBtns:!0,onNext:t[5]||(t[5]=e=>i.goToNextBlendPlane()),onPrev:t[6]||(t[6]=e=>i.goToPrevBlendPlane()),onEnabled:i.setBlendStatus},null,8,["checkbox","image","isEnabled","onEnabled"]),(0,d.Wm)(c,{onMoveX:i.moveSprite1X,onMoveY:i.moveSprite1Y,xOffset:s.xOffset1,yOffset:s.yOffset1},null,8,["onMoveX","onMoveY","xOffset","yOffset"])])])]),(0,d.Wm)(m,null,{default:(0,d.w5)((()=>[(0,d.Wm)(u,{onExportMain:t[7]||(t[7]=e=>i.exportCurrentSprite(0)),onExportBlend:t[8]||(t[8]=e=>i.exportCurrentSprite(1)),options:s.options},null,8,["options"])])),_:1})])),_:1},8,["show"])}const $n=e=>((0,d.dD)("data-v-85874434"),e=e(),(0,d.Cn)(),e),Rn={class:"control-container"},Un={class:"buttons"},zn={class:"up-container"},Ln={class:"down-container"},jn={class:"left-container"},Vn={class:"right-container"},Zn={class:"position-container"},Hn=$n((()=>(0,d._)("p",{class:"label-header"},"Position:",-1))),qn={class:"label-container"},Yn={class:"label"},Jn={class:"label"};function Xn(e,t,n,a,s,i){const o=(0,d.up)("LargeIcon"),r=(0,d.up)("MinimalButton");return(0,d.wg)(),(0,d.iD)("div",Rn,[(0,d._)("div",Un,[(0,d._)("div",zn,[(0,d.Wm)(r,{onClick:t[0]||(t[0]=e=>{this.$emit("move-y",-1)}),size:"large",class:"up"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"up"})])),_:1})]),(0,d._)("div",Ln,[(0,d.Wm)(r,{onClick:t[1]||(t[1]=e=>{this.$emit("move-y",1)}),size:"large",class:"down"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"down"})])),_:1})]),(0,d._)("div",jn,[(0,d.Wm)(r,{onClick:t[2]||(t[2]=e=>{this.$emit("move-x",-1)}),size:"large",class:"left"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"left"})])),_:1})]),(0,d._)("div",Vn,[(0,d.Wm)(r,{onClick:t[3]||(t[3]=e=>{this.$emit("move-x",1)}),size:"large",class:"right"},{default:(0,d.w5)((()=>[(0,d.Wm)(o,{type:"right"})])),_:1})]),(0,d._)("div",Zn,[Hn,(0,d._)("div",qn,[(0,d._)("p",Yn,"X: "+(0,u.zw)(n.xOffset),1),(0,d._)("p",Jn,"Y: "+(0,u.zw)(n.yOffset),1)])])])])}var Kn={name:"OffsetCotrol",components:{MinimalButton:M,LargeIcon:at},props:{xOffset:Number,yOffset:Number},methods:{}};const Gn=(0,_.Z)(Kn,[["render",Xn],["__scopeId","data-v-85874434"]]);var Qn=Gn;const ea=re(r);var ta={name:"SpriteModal",components:{BaseModal:Ze,ModalHeader:ot,ModalFooter:ut,ExportSection:Zt,MainDmd:tn,SubDmd:un,OffsetControl:Qn},setup(){const{exportOption:e,settings:t}=(0,i.Jk)(ea);return{exportOption:e,settings:t}},data(){const e=new Array,t=["PNG image from render","Monochrome BMP image","Monochrome BMP image (inverted)","Raw byte array"];for(let n=0;n<t.length;n++){const a=n==this.exportOption;e.push({value:n,label:t[n],selected:a})}return{doBlend:!1,offset:0,blendOffset:1,xOffset0:-1,yOffset0:-1,xOffset1:-1,yOffset1:-1,prevTable:-1,options:e}},props:{show:Boolean,index:Number,table:Number},computed:{planeIndices(){const e=Math.max(this.index+this.offset,0);return{current:e,blend:Math.max(e+this.blendOffset,0)}},currPlaneTitle(){return`This sprite, index ${this.planeIndices.current}`},blendPlaneLabel(){return`Blend with index ${this.planeIndices.blend}`},title(){return`Image ${(0,ie.toHex)(ea.getSpriteAt(this.table,this.planeIndices.current).address,6)}`}},methods:{image0(){const e=this.planeIndices,t=ea.getSpriteAt(this.table,e.current);return-1==this.xOffset0&&-1==this.yOffset0&&(this.xOffset0=Math.floor((128-t.width)/2),this.yOffset0=Math.floor((32-t.height)/2)),ea.getSpriteAsFullFrame(t,this.xOffset0,this.yOffset0)},image1(){return this.doBlend?this.blendImage():this.image0()},blendImage(){const e=this.planeIndices,t=ea.getSpriteAt(this.table,e.blend);return-1==this.xOffset1&&-1==this.yOffset1&&(this.xOffset1=Math.floor((128-t.width)/2),this.yOffset1=Math.floor((32-t.height)/2)),ea.getSpriteAsFullFrame(t,this.xOffset1,this.yOffset1)},setBlendStatus(e){1==e?this.doBlend=!0:0==e&&(this.doBlend=!1)},goToNextBlendPlane(){this.blendOffset++},goToPrevBlendPlane(){this.blendOffset--},goNext(){this.offset++,this.setInitValues()},goPrev(){this.planeIndices.current>0&&this.offset--,this.setInitValues()},goN2(){this.offset+=2,this.setInitValues()},goP2(){this.planeIndices.current>0&&(this.offset-=2),this.setInitValues()},moveSprite0X(e){this.xOffset0+=e},moveSprite0Y(e){this.yOffset0+=e},moveSprite1X(e){this.xOffset1+=e},moveSprite1Y(e){this.yOffset1+=e},setInitValues(){this.blendOffset=1,this.table!=this.prevTable&&(this.xOffset0=-1,this.yOffset0=-1,this.xOffset1=-1,this.yOffset1=-1)},exportCurrentSprite(e){let t=this.planeIndices.current;if(1==e&&(t=this.planeIndices.blend),0==this.exportOption)this.$refs.main.downloadPng();else if(3==this.exportOption){const e=ea.exportAsDataArray(ea.getSpriteAt(this.table,t).image);let n=document.createElement("a");n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e);const a="plane"+t+".txt";n.download=a,n.style.display="none",document.body.appendChild(n),n.click(),n.parentNode.removeChild(n)}else if(1==this.exportOption||2==this.exportOption){let n=!1;2==this.exportOption&&(n=!0);let a=this.xOffset0,s=this.yOffset0;1==e&&(a=this.xOffset1,s=this.yOffset1);const i=ea.getSpriteAt(this.table,t),o=ea.getSpriteAsFullFrame(i,a,s);let r=ea.exportAs1bitBmp(o,n,128,32),l=document.createElement("a");l.href="data:image/bmp;base64,"+r;const d="plane"+t+".bmp";l.download=d,l.style.display="none",document.body.appendChild(l),l.click(),l.parentNode.removeChild(l)}}},updated(){this.offset=0,this.setInitValues(),this.prevTable=this.table}};const na=(0,_.Z)(ta,[["render",En],["__scopeId","data-v-4bc14ba2"]]);var aa=na;const sa=re(r);var ia={name:"SpritesView",components:{SpriteList:Wn,PaginationBlock:yn,SpriteModal:aa},props:{},setup(){const{spriteTableMap:e,settings:t}=(0,i.Jk)(sa);return{spriteTableMap:e,settings:t}},data(){return{plane0:new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,254,7,128,0,0,0,0,0,0,0,0,0,0,0,0,128,255,15,192,0,0,224,192,1,0,0,0,0,0,0,0,192,15,31,224,0,0,240,224,1,0,0,0,0,0,0,0,224,1,30,112,0,0,120,240,0,0,0,0,0,0,0,0,240,8,30,120,0,0,124,248,0,0,0,0,0,0,0,0,120,24,62,124,48,3,60,120,48,0,0,0,0,0,0,0,60,24,62,60,184,7,62,124,120,0,0,0,0,0,0,0,28,28,63,62,156,5,30,60,88,0,0,0,0,0,0,0,14,28,31,31,142,4,31,62,72,0,0,0,0,0,0,0,14,20,157,31,7,131,15,31,48,0,0,0,0,0,0,0,7,150,221,159,3,128,15,31,0,0,0,0,0,0,0,8,7,138,236,205,1,192,135,15,0,0,0,0,0,0,0,28,3,203,252,238,1,224,194,5,0,0,0,0,0,0,0,14,131,73,56,254,0,96,195,6,0,0,0,0,0,0,0,7,195,100,0,119,120,48,97,2,15,248,60,56,56,112,128,7,101,34,48,35,126,184,113,195,15,254,63,126,124,252,192,7,154,49,40,49,127,152,48,225,15,159,31,127,255,254,225,7,124,16,36,144,45,204,152,241,134,143,159,255,255,255,241,14,0,24,18,136,52,66,140,88,194,141,202,250,235,183,89,10,0,12,17,200,24,65,70,72,163,132,72,53,105,154,44,10,0,132,16,36,136,32,65,12,17,66,164,130,12,205,20,27,0,66,16,36,72,160,32,134,9,66,148,130,132,68,6,115,0,33,16,66,36,80,32,129,4,33,82,65,66,98,18,65,128,24,16,66,148,32,145,132,10,17,42,33,34,34,161,33,64,4,16,65,72,129,98,10,149,8,149,16,33,162,166,16,32,3,16,65,32,65,4,9,146,28,138,8,17,66,73,8,208,0,160,128,24,34,132,144,33,39,70,136,8,196,8,6,56,0,192,0,7,28,120,96,192,195,193,135,7,56,240,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),plane1:new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,158,7,128,0,0,0,0,0,0,0,0,0,0,0,0,128,3,0,192,0,0,224,192,1,0,0,0,0,0,0,0,192,0,0,96,0,0,48,96,0,0,0,0,0,0,0,0,96,0,0,48,0,0,24,48,0,0,0,0,0,0,0,0,48,8,0,24,0,0,12,24,0,0,0,0,0,0,0,0,24,24,0,12,48,3,4,8,48,0,0,0,0,0,0,0,12,8,0,4,152,1,6,12,24,0,0,0,0,0,0,0,4,12,0,6,140,2,2,4,40,0,0,0,0,0,0,0,6,4,0,3,134,3,3,6,56,0,0,0,0,0,0,0,2,12,130,1,3,128,1,3,0,0,0,0,0,0,0,0,3,14,194,128,1,128,0,1,0,0,0,0,0,0,0,8,1,6,99,194,0,192,128,1,0,0,0,0,0,0,0,12,1,7,51,97,0,96,193,2,0,0,0,0,0,0,0,6,129,135,199,49,0,160,64,1,0,0,0,0,0,0,0,3,193,131,255,8,120,240,224,1,15,248,60,56,56,112,128,1,227,193,207,28,14,88,176,192,1,14,7,14,12,28,192,0,100,192,199,14,3,104,208,96,0,3,0,3,7,6,96,0,0,224,195,15,18,48,96,0,1,0,0,0,0,0,0,0,0,224,225,7,11,60,112,160,1,2,5,1,16,64,32,4,0,240,224,7,7,62,56,176,64,3,135,200,144,97,16,4,0,120,224,195,7,31,62,240,224,129,67,124,240,48,8,4,0,60,224,195,135,31,31,120,240,129,99,124,120,56,8,12,0,30,224,129,195,143,31,126,248,192,33,62,60,28,12,62,0,7,224,129,99,223,14,123,244,224,17,30,28,28,30,30,128,3,224,128,55,126,156,241,98,240,8,15,30,28,25,15,192,0,224,128,31,62,248,240,97,224,5,7,14,188,144,7,240,0,224,128,31,62,252,240,225,230,199,143,15,252,248,7,56,0,192,0,7,28,120,96,192,195,193,135,7,56,240,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),emptyPlane:new Uint8Array(512),activeIndex:0,activeTable:0,currPage:0,showModal:!1}},computed:{tableMap(){return this.settings.dmdsPerPage>0?[this.spriteTableMap[this.currPage]]:this.spriteTableMap}},methods:{openModal(e){this.activeIndex=e.index,this.activeTable=e.tableIndex,this.showModal=!0},getSprite(e){return sa.getSpriteAt(1,e).image},spriteTables(){return sa.vsImageIndexMap.length},tableIndex(e){return this.settings.dmdsPerPage>0?this.currPage:e},nextPage(){this.currPage++},prevPage(){this.currPage=Math.max(0,this.currPage-1)},startPage(){this.currPage=0}},beforeRouteEnter(){sa.setViewTitle("Sprites and fonts"),sa.isAtHomeView=!1}};const oa=(0,_.Z)(ia,[["render",Sn],["__scopeId","data-v-7d9ceb66"]]);var ra=oa;const la=e=>((0,d.dD)("data-v-0f4df65a"),e=e(),(0,d.Cn)(),e),da={class:"scroll-area"},ca={class:"main-container"},ua={class:"content-wrapper"},ma={class:"info-container"},ha={key:0,class:"label-md text-accent status-msg"},pa={key:1,class:"label-md text-accent status-msg",ref:"invalid"},ga={key:2,class:"label-md text-accent status-msg",ref:"invalid"},fa={class:"info-row"},ba={class:"info-col"},va=la((()=>(0,d._)("p",{class:"label-sm"},"Current checksum",-1))),wa={class:"label-md"},ya={class:"info-col"},ka=la((()=>(0,d._)("p",{class:"label-sm"},"Fixup bytes",-1))),xa={class:"label-md"},Ia={class:"info-row"},_a={class:"info-col"},Ca=la((()=>(0,d._)("p",{class:"label-sm"},"Calculated checksum",-1))),Ma={class:"label-md"},Sa={class:"info-col"},Ba=la((()=>(0,d._)("p",{class:"label-sm"},"Version byte",-1))),Pa={class:"label-md"},Oa=la((()=>(0,d._)("p",{class:"headline"},"Calculate and update checksum",-1))),Fa=la((()=>(0,d._)("p",{class:"body-sm"},"Use this tool to calculate and set new valid checksum and fixup bytes of a modified WPC ROM. The checksum is caluculated from a sum of all the bytes in the ROM and consists of two bytes, of which the last byte represents the game version. The fixup bytes can be any value that makes the checksum match.",-1))),Da=la((()=>(0,d._)("p",{class:"headline"},"Desired game version:",-1))),Aa={class:"checksum-form"},Wa=la((()=>(0,d._)("hr",null,null,-1))),Ta=la((()=>(0,d._)("p",{class:"headline"},"Disable checksum",-1))),Na=la((()=>(0,d._)("p",{class:"body-sm"},"The checksum may be temporarily disabled while debugging ROM. This is done by setting the fixup bytes to 0xFF00. This will also remove other startup tests. Once the modified ROM is ready, you should always insert a correct checksum using the tool above so that the game will alert you about any errors.",-1)));function Ea(e,t,n,a,s,i){const o=(0,d.up)("LargeIcon"),r=(0,d.up)("NumeralInput"),l=(0,d.up)("StandardButton");return(0,d.wg)(),(0,d.iD)("div",da,[(0,d._)("div",ca,[(0,d._)("div",ua,[(0,d._)("div",ma,[a.checksumIsValid&&"00FF"!=a.fixupBytes?((0,d.wg)(),(0,d.iD)("p",ha,[(0,d.Wm)(o,{type:"check"}),(0,d.Uk)(" The checksum in this ROM is valid")])):(0,d.kq)("",!0),a.checksumIsValid||"00FF"==a.fixupBytes?(0,d.kq)("",!0):((0,d.wg)(),(0,d.iD)("p",pa,[(0,d.Wm)(o,{type:"warning"}),(0,d.Uk)(" The checksum in this ROM is invalid")],512)),"00FF"==a.fixupBytes?((0,d.wg)(),(0,d.iD)("p",ga,[(0,d.Wm)(o,{type:"info"}),(0,d.Uk)(" The checksum has been disabled in this ROM")],512)):(0,d.kq)("",!0),(0,d._)("div",fa,[(0,d._)("div",ba,[va,(0,d._)("p",wa,(0,u.zw)(a.storedChecksum),1)]),(0,d._)("div",ya,[ka,(0,d._)("p",xa,(0,u.zw)(a.fixupBytes),1)])]),(0,d._)("div",Ia,[(0,d._)("div",_a,[Ca,(0,d._)("p",Ma,(0,u.zw)(a.calculatedChecksum),1)]),(0,d._)("div",Sa,[Ba,(0,d._)("p",Pa,(0,u.zw)(a.versionByte),1)])])]),Oa,Fa,Da,(0,d._)("div",Aa,[(0,d.Wm)(r,{size:"large",value:Number(this.versionByte),maxlength:2,min:1,max:99,class:"version-input",ref:"version",onChange:i.updateInput},null,8,["value","onChange"]),(0,d.Wm)(l,{size:"large",type:"primary",onClick:t[0]||(t[0]=t=>i.updateChecksum(e.value))},{default:(0,d.w5)((()=>[(0,d.Uk)("Update checksum")])),_:1})]),(0,d._)("p",{class:(0,u.C_)(["label-md text-accent feedback-msg",s.checksumFeedbackClass]),ref:"checksumFeedback"},(0,u.zw)(s.checksumFeedbackMsg),3),Wa,Ta,Na,(0,d.Wm)(l,{size:"large",type:"primary",onClick:t[1]||(t[1]=e=>i.disableChecksum())},{default:(0,d.w5)((()=>[(0,d.Uk)("Disable checksum")])),_:1}),(0,d._)("p",{class:(0,u.C_)(["label-md text-accent feedback-msg",s.disableFeedbackClass]),ref:"disableFeedback"},(0,u.zw)(s.disableFeedbackMsg),3)])])])}const $a=["min","max"];function Ra(e,t,n,s,i,o){return(0,d.wy)(((0,d.wg)(),(0,d.iD)("input",{type:"number",class:(0,u.C_)(["num-input",o.getClass()]),min:n.min,max:n.max,"onUpdate:modelValue":t[0]||(t[0]=e=>o.model=e),ref:"input"},null,10,$a)),[[a.nr,o.model]])}var Ua={name:"NumeralInput",props:{value:Number,max:Number,min:Number,maxlength:Number,size:String},computed:{model:{get(){return this.value},set(e){const t=this.$refs.input,n=e.toString().length;n>this.maxlength&&(t.value=Number(e.toString().slice(0,this.maxlength))),this.$emit("input",e)}}},methods:{getClass(){let e="small";return"large"==this.size&&(e="large"),e},limitLength(){const e=this.$refs.input,t=e.value;t.length>=this.maxlength&&(e.value=t.slice(0,this.maxlength-1))}}};const za=(0,_.Z)(Ua,[["render",Ra],["__scopeId","data-v-429feb35"]]);var La=za;const ja=re(r);var Va={name:"ChecksumView",components:{StandardButton:O,NumeralInput:La,LargeIcon:Y},props:{},data(){return{inputVal:Number(this.versionByte),checksumFeedbackClass:"hidden",disableFeedbackClass:"hidden",checksumFeedbackMsg:"",disableFeedbackMsg:""}},setup(){const{romIsLoaded:e,romIsAltered:t,storedChecksum:n,calculatedChecksum:a,fixupBytes:s,versionByte:o,checksumIsValid:r}=(0,i.Jk)(ja);return{romIsLoaded:e,romIsAltered:t,storedChecksum:n,calculatedChecksum:a,fixupBytes:s,versionByte:o,checksumIsValid:r}},beforeRouteEnter(){ja.setViewTitle("Checksum tool"),ja.isAtHomeView=!1},methods:{updateChecksum(){const e=this.inputVal;this.checksumFeedbackClass="hidden",setTimeout((()=>{const t=ja.updateChecksum(e);this.checksumFeedbackMsg=1==t?"The checksum was successfully updated!":0==t?"The version byte matches the current checksum, no need to update":"Was not able to figure out a new checksum :(",this.checksumFeedbackClass="show"}),500)},disableChecksum(){this.disableFeedbackClass="hidden",setTimeout((()=>{1==ja.disableChecksum()?this.disableFeedbackMsg="The checksum is now disabled.":this.disableFeedbackMsg="An error occured while trying to disable.",this.disableFeedbackClass="show"}),500)},updateInput(e){this.inputVal=e.target.value}}};const Za=(0,_.Z)(Va,[["render",Ea],["__scopeId","data-v-0f4df65a"]]);var Ha=Za;const qa=e=>((0,d.dD)("data-v-de18db54"),e=e(),(0,d.Cn)(),e),Ya={class:"scroll-area"},Ja={class:"main-container"},Xa={class:"content-wrapper"},Ka={class:"settings-container"},Ga={class:"setting"},Qa=qa((()=>(0,d._)("p",{class:"headline"},"Display style",-1))),es={class:"setting"},ts=qa((()=>(0,d._)("p",{class:"headline"},"Make in-betweening optional",-1))),ns=qa((()=>(0,d._)("p",{class:"body-sm"},'Some DMD encodings in WPC rely on previous frames to render completely. In those cases you may check "Apply image X on top" in the full frame image. Per default, WPC Edit also renders all the frames in between the base frame and your selected merge frame to get a proper composition. If you want to experiment on your own, you may make in-betweening optional by turning off the setting below:',-1))),as={class:"setting"},ss=qa((()=>(0,d._)("p",{class:"headline"},"DMD graphics per page",-1))),is=qa((()=>(0,d._)("p",{class:"body-sm"},"Rendering many DMD images at once can be perfomance-intense. If you experience issues, you may reduce the amount of DMD images per page in the Full Frame and Sprite listings.",-1))),os={class:"setting"},rs=qa((()=>(0,d._)("p",{class:"headline"},"Warning messages",-1))),ls=qa((()=>(0,d._)("p",{class:"body-sm"},"You may reset all warning messages in WPC Edit to see them again.",-1))),ds=qa((()=>(0,d._)("hr",null,null,-1))),cs=qa((()=>(0,d._)("p",{class:"headline"},"About WPC Edit",-1))),us=qa((()=>(0,d._)("p",{class:"body-sm"},[(0,d.Uk)("WPC Edit was first developed and released in 2004 by Garrett Lee as a Windows app. In 2023, Per Martinson took on the challange to transition the code base to Javascript and turn it into a web app. All the code is open source, and published at "),(0,d._)("a",{target:"_blank",href:"https://github.com/permartinson/wpcedit"},"https://github.com/permartinson/wpcedit"),(0,d.Uk)(". Please help out by submitting any bugs you might find.")],-1)));function ms(e,t,n,a,s,i){const o=(0,d.up)("MainDmd"),r=(0,d.up)("SelectInput"),l=(0,d.up)("CheckBox"),c=(0,d.up)("StandardButton");return(0,d.wg)(),(0,d.iD)("div",Ya,[(0,d._)("div",Ja,[(0,d._)("div",Xa,[(0,d._)("div",Ka,[(0,d._)("div",Ga,[Qa,((0,d.wg)(),(0,d.j4)(o,{image0:s.image0,image1:s.image1,index:0,key:a.settings.displayStyle,ref:"main"},null,8,["image0","image1"])),(0,d.Wm)(r,{name:"dmdstyle",options:s.dmdOptions,onChange:i.setDmdStyle,class:"dmd-style-select"},null,8,["options","onChange"])]),(0,d._)("div",es,[ts,ns,(0,d.Wm)(l,{class:"in-between",onChange:i.setIntbetween,checked:a.settings.optionalInbetweening,label:"Add option for in-between",ref:"inBetween"},null,8,["onChange","checked"])]),(0,d._)("div",as,[ss,is,(0,d.Wm)(r,{name:"perpage",options:s.paginationOptions,onChange:i.setPagination,class:"pagination-select"},null,8,["options","onChange"])]),(0,d._)("div",os,[rs,ls,(0,d.Wm)(c,{size:"small",onClick:t[0]||(t[0]=e=>i.resetWarnings())},{default:(0,d.w5)((()=>[(0,d.Uk)("Reset all warning messages")])),_:1}),(0,d._)("p",{class:(0,u.C_)(["label-md text-accent feedback-msg",s.warningsFeedbackClass]),ref:"disableFeedback"},(0,u.zw)(s.warningsFeedbackMsg),3)])]),ds,cs,us])])])}const hs=re(r);var ps={name:"SettingsView",components:{StandardButton:O,MainDmd:tn,SelectInput:zt,CheckBox:V},props:{},data(){const e=Uint8Array.from([0,0,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,128,1,0,128,0,0,0,0,0,0,0,0,0,0,0,0,192,3,0,192,1,0,0,0,0,0,0,0,0,0,0,0,192,7,248,255,255,31,0,0,0,0,0,0,0,0,0,0,192,15,0,192,31,120,254,1,120,0,0,0,0,0,0,0,224,31,0,128,30,120,254,7,254,1,0,0,0,0,0,0,252,255,0,128,30,120,254,15,255,3,0,0,0,0,0,0,254,255,1,128,30,120,254,15,255,3,0,0,0,0,0,0,255,195,3,128,30,120,30,158,135,7,0,128,1,0,0,0,254,129,7,0,30,120,30,158,135,7,0,128,17,0,0,0,252,3,15,0,30,120,30,158,135,7,0,192,16,8,0,0,248,7,30,0,30,120,30,158,7,0,0,192,56,0,0,0,241,15,60,0,30,120,30,158,7,0,15,252,255,127,0,0,225,31,124,0,30,120,30,158,7,128,25,6,56,0,0,0,197,63,252,0,158,121,254,143,7,192,152,97,16,6,0,0,132,127,252,1,158,121,254,143,7,192,152,97,24,6,0,0,20,255,254,3,158,121,254,135,7,96,216,96,8,6,0,0,16,254,255,7,158,121,254,129,7,96,206,32,8,2,0,0,80,252,255,15,222,123,30,128,7,224,199,48,12,3,0,0,64,248,255,31,222,123,30,128,7,96,192,48,12,67,0,0,64,241,255,63,254,127,30,128,135,103,192,48,142,67,0,0,0,225,255,123,126,126,30,128,135,71,176,56,77,39,0,0,0,197,255,113,126,126,30,128,135,135,15,231,56,30,0,0,0,132,255,32,62,124,30,0,255,3,0,0,0,0,0,0,0,20,127,0,62,124,30,0,255,3,0,0,0,0,0,0,0,16,62,0,30,120,30,0,254,1,0,0,0,0,0,0,0,80,28,252,30,120,158,127,120,248,255,255,255,255,1,0,0,64,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,1,0,30,120,0,0,120,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t=Uint8Array.from([0,128,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,2,0,128,0,0,0,0,0,0,0,0,0,0,0,0,96,4,0,128,0,0,0,0,0,0,0,0,0,0,0,0,32,136,135,255,255,225,1,0,0,0,0,0,0,0,0,0,32,16,0,128,0,120,254,1,120,0,0,0,0,0,0,0,28,32,0,128,31,120,254,7,254,1,0,0,0,0,0,0,6,64,0,128,31,120,254,15,255,3,0,0,0,0,0,0,3,224,0,0,31,120,254,15,255,3,0,192,3,0,0,128,1,252,1,0,30,120,30,158,135,7,0,192,19,0,0,128,1,130,3,128,30,120,30,158,135,7,0,192,3,24,0,128,3,0,7,128,30,120,30,158,135,7,0,224,49,28,0,128,7,0,14,0,30,120,30,158,7,0,15,32,81,31,0,0,14,0,30,0,30,120,30,158,7,128,31,227,255,143,3,0,31,0,58,0,30,120,30,158,7,192,191,255,21,15,0,0,57,0,114,0,158,121,254,143,7,224,253,243,60,7,0,0,124,0,226,0,158,121,254,143,7,224,253,243,36,7,0,0,228,0,193,1,158,121,254,135,7,240,254,241,60,7,0,0,240,1,128,3,158,121,254,129,7,240,255,113,28,7,0,0,144,3,0,7,222,123,30,128,7,240,239,121,158,71,0,0,192,7,0,14,222,123,30,128,7,240,231,121,158,231,0,0,64,14,0,28,254,127,30,128,135,247,240,121,223,231,0,0,0,31,0,60,126,126,30,128,135,231,255,255,255,127,0,0,0,57,0,127,126,126,30,128,135,199,191,255,125,63,0,0,0,124,128,39,62,124,30,0,255,131,15,231,56,30,0,0,0,228,192,3,62,124,30,0,255,3,0,0,0,0,0,0,0,240,225,1,30,120,30,0,254,1,0,0,0,0,0,0,0,144,243,0,30,120,30,0,120,0,0,0,0,0,0,0,0,192,127,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,62,255,225,135,255,255,135,255,255,255,255,127,0,0,0,0,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,205,255,255,255,255,255,255,255,255,255,255,31,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),n=new Array,a=["Simulated plasma display","Orange dots","Orange squares","White dots","White squares"];for(let o=0;o<a.length;o++){const e=o==this.settings.displayStyle;n.push({value:o,label:a[o],selected:e})}const s=new Array,i=["Infinite","16 full frames / 1 sprite table","24 full frames / 1 sprite table","32 full frames / 1 sprite table"];for(let o=0;o<i.length;o++){const e=o==this.settings.dmdsPerPage;s.push({value:o,label:i[o],selected:e})}return{inputVal:Number(this.versionByte),warningsFeedbackClass:"hidden",warningsFeedbackMsg:"",image0:e,image1:t,dmdOptions:n,paginationOptions:s}},setup(){const{settings:e}=(0,i.Jk)(hs);return{settings:e}},beforeRouteEnter(){hs.setViewTitle("Settings"),hs.isAtHomeView=!1},methods:{setDmdStyle(e){void 0!=e.value&&(this.settings.displayStyle=e.value)},setIntbetween(e){1==e?this.settings.optionalInbetweening=!0:0==e&&(this.settings.optionalInbetweening=!1)},setPagination(e){void 0!=e.value&&(this.settings.dmdsPerPage=e.value)},resetWarnings(){this.disableFeedbackClass="hidden",hs.resetWarnings(),setTimeout((()=>{this.warningsFeedbackMsg="All errors has been reset and will now appear again.",this.warningsFeedbackClass="show"}),500)}}};const gs=(0,_.Z)(ps,[["render",ms],["__scopeId","data-v-de18db54"]]);var fs=gs,bs=n(5431);(0,bs.z)("/wpcedit/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const vs=[{path:"/wpcedit/",component:vt},{path:"/wpcedit/fullframe",component:_n},{path:"/wpcedit/sprites",component:ra},{path:"/wpcedit/checksum",component:Ha},{path:"/wpcedit/settings",component:fs}],ws=(0,s.p7)({history:(0,s.PO)(),routes:vs});ws.afterEach((e=>{document.title="WPC Edit",e.meta.transition="fade"})),(0,a.ri)(ge).use(l.ZP).use(r).use(ws).mount("#app")},8145:function(e,t,n){const{openDB:a}=n(3831),s=a("wpcEdit",1,{upgrade(e){e.createObjectStore("keyval")}});async function i(e){return(await s).get("keyval",e)}async function o(e,t){return(await s).put("keyval",t,e)}async function r(){return(await s).getAllKeys("keyval")}async function l(){return(await s).getAll("keyval")}e.exports={get:i,set:o,keys:r,getAll:l}},659:function(e,t,n){"use strict";e.exports=n.p+"img/0.366423c7.svg"},373:function(e,t,n){"use strict";e.exports=n.p+"img/1.6644a630.svg"},7528:function(e,t,n){"use strict";e.exports=n.p+"img/2.cecd72cf.svg"},7870:function(e,t,n){"use strict";e.exports=n.p+"img/3.b4455c5b.svg"}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,a,s,i){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],i=e[c][2];for(var r=!0,l=0;l<a.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{57:"62093abb",264:"15de0bc1"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{57:"0b045f02",264:"a002cfb3"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="wpc-edit:";n.l=function(a,s,i,o){if(e[a])e[a].push(s);else{var r,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+i){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+i),r.src=a),e[a]=[s];var m=function(t,n){r.onerror=r.onload=null,clearTimeout(h);var s=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/wpcedit/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,a,s){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var o=function(n){if(i.onerror=i.onload=null,"load"===n.type)a();else{var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,i.parentNode.removeChild(i),s(l)}};return i.onerror=i.onload=o,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var s=n[a],i=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===e||i===t))return s}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){s=o[a],i=s.getAttribute("data-href");if(i===e||i===t)return s}},a=function(a){return new Promise((function(s,i){var o=n.miniCssF(a),r=n.p+o;if(t(o,r))return s();e(a,r,null,s,i)}))},s={143:0};n.f.miniCss=function(e,t){var n={57:1,264:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=a(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,a){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var i=new Promise((function(n,a){s=e[t]=[n,a]}));a.push(s[2]=i);var o=n.p+n.u(t),r=new Error,l=function(a){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,s[1](r)}};n.l(o,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,o=a[0],r=a[1],l=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(t&&t(a);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunkwpc_edit"]=self["webpackChunkwpc_edit"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(9206)}));a=n.O(a)})();
//# sourceMappingURL=app.80d78b51.js.map