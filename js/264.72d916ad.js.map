{"version":3,"file":"js/264.72d916ad.js","mappings":"sKACWA,MAAM,iB,GACDC,IAAI,MAAMD,MAAM,MAAME,MAAM,MAAMC,OAAO,M,0CADnDC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,EADJC,EAAAA,EAAAA,GAA+D,SAA/DC,EAA+D,W,CAMvE,OACAC,KAAM,UACNC,MAAO,CACLC,MAAOC,WACPC,MAAOC,QAETC,OACE,MAAO,CACLC,SAAS,EAEb,EACAC,QAAS,CACPC,YACI,MAAMC,EAAW,EACXC,EAAa,KACbC,EAASC,KAAKC,MAAMC,IACpBC,EAAMJ,EAAOK,WAAW,MAC9B,IAAI,IAAIC,EAAE,EAAGA,EAAEP,EAAYO,IAAK,CAC5B,MAAMC,EAAQD,EAAI,IAAOR,EACnBU,EAAOC,KAAKC,MAAMJ,EAAI,KAAOR,EAC7Ba,EAASV,KAAKW,YAAYX,KAAKX,MAAMgB,GAC3CF,EAAIS,YACJT,EAAIU,KAAKP,EAAMC,EAAMV,EAAUA,GAC/BM,EAAIW,UAAa,qBAA2B,IAAPJ,KACrCP,EAAIY,MACR,CACJ,EACAJ,YAAYK,EAAUzB,GAClB,MAAMV,EAAQ,IACRoC,EAAM1B,EAAQV,EACdqC,EAAOV,KAAKC,MAAMlB,EAAM,GACxB4B,EAAUF,EAAM,EAChBG,GAA2B,IAAlBJ,EAAUE,KAAmBC,EAAU,EACtD,OAAOC,CACX,GAEFC,UACErB,KAAKJ,WACL,G,QCvCF,MAAM0B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,2FCPW5C,MAAM,mB,sEADbI,EAAAA,EAAAA,IAIM,OAJDJ,MAAM,mBAAoB6C,QAAK,eAAEC,EAAAA,MAAM,OAAD,CAAAlC,MAAemC,EAAAA,MAAKC,WAAYD,EAAAA,cAAc9C,IAAI,U,EAC3FK,EAAAA,EAAAA,GAEM,MAFND,EAEM,CADW4C,EAAAA,eAAY,WAA3BC,EAAAA,EAAAA,IAA0GC,EAAAA,C,MAA5EvC,MAAOmC,EAAAA,MAAQK,MAAOL,EAAAA,WAAarC,MAAOqC,EAAAA,MAAQM,OAAQN,EAAAA,Q,qGAUhG,GACEvC,KAAM,aACNC,MAAO,CACLC,MAAOC,WACPC,MAAOC,OACPmC,WAAYnC,OACZwC,OAAQC,QAEVC,WAAY,CACVC,QAAOA,EAAAA,GAET1C,OACE,MAAO,CACLC,SAAS,EAEb,EACA0C,QACE,MAAMC,GAASzD,EAAAA,EAAAA,IAAI,MACb0D,GAAe1D,EAAAA,EAAAA,KAAI,GAgBzB,OAdA2D,EAAAA,EAAAA,KACEF,GACA,GAAIG,sBAEuB,GAAtBF,EAAaG,QACdH,EAAaG,MAAQD,EACrBE,OACF,GAEF,CACEC,WAAY,QACZC,UAAW,IAGR,CACLP,SACAC,eAEJ,G,QC5CF,MAAMhB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://wpc-edit/./src/components/dmd/ListDmd.vue","webpack://wpc-edit/./src/components/dmd/ListDmd.vue?d133","webpack://wpc-edit/./src/components/ui/list-items/SpriteItem.vue","webpack://wpc-edit/./src/components/ui/list-items/SpriteItem.vue?ce49"],"sourcesContent":["<template>\n      <div class=\"dmd-container\">\n        <canvas ref=\"dmd\" class=\"dmd\" width=\"256\" height=\"64\"></canvas>\n      </div>\n</template>\n\n<script>\n\nexport default {\nname: 'ListDmd',\nprops: {\n  image: Uint8Array,\n  index: Number,\n},\ndata() {\n  return {\n    isDrawn: false\n  }\n},\nmethods: {\n  drawImage() {\n      const DOT_SIZE = 2;\n      const IMAGE_SIZE = 128*32;\n      const canvas = this.$refs.dmd;\n      const ctx = canvas.getContext(\"2d\");\n      for(let i=0; i<IMAGE_SIZE; i++) {\n          const dotX = (i % 128) * DOT_SIZE;\n          const dotY = Math.floor(i / 128) * DOT_SIZE;\n          const dotVal = this.getDotValue(this.image,i);\n          ctx.beginPath();\n          ctx.rect(dotX, dotY, DOT_SIZE, DOT_SIZE);\n          ctx.fillStyle = `rgba(250, 136, 2, ${dotVal*255})`;\n          ctx.fill();\n      }\n  },\n  getDotValue(imageData,index) {\n      const width = 128;\n      const col = index % width;\n      const byte = Math.floor(index/8);\n      const bitPos = (col % 8);\n      const bit =  ( imageData[byte] & 0xFF ) >> (bitPos) & 0x01; // get the value of the bit containing this pixel\n      return bit;\n  }\n},\nmounted() {\n  this.drawImage();\n  }\n}\n\n</script>\n\n<style scoped>\n\n.list-item-fullframe {\nmargin: 1rem;\nwidth: 23.5rem;\nheight: 8.2rem;\nbackground: var(--grey5);\nborder-radius: var(--radius-md);\ncursor: pointer;\nbox-shadow: var(--shadow-btn-default);\n}\n\n.list-item-fullframe:hover {\nbackground: var(--grey4);\nbox-shadow: var(--shadow-btn-hover);\n}\n\n.list-item-inner {\nposition: relative;\nwidth: 100%;\nheight: 100%;\n}\n\n.dmd-container {\nposition: absolute;\ntop: var(--btn-outer-frame);\nleft: var(--btn-outer-frame);\nbottom: var(--btn-outer-frame);\nright: var(--btn-outer-frame);\nborder: 0.1rem solid var(--grey8);\ndisplay: flex;\nalign-items: center center;\n}\n\n.dmd {\nwidth: calc(100% - var(--space-md));\nmargin: auto;\n}\n\n</style>","import { render } from \"./ListDmd.vue?vue&type=template&id=06fb11e9&scoped=true\"\nimport script from \"./ListDmd.vue?vue&type=script&lang=js\"\nexport * from \"./ListDmd.vue?vue&type=script&lang=js\"\n\nimport \"./ListDmd.vue?vue&type=style&index=0&id=06fb11e9&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/permartinson/Documents/GitHub/wpcedit/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-06fb11e9\"]])\n\nexport default __exports__","<template>\n    <div class=\"list-item-sprite\" @click=\"$emit('open',{index:index,tableIndex:tableIndex})\" ref=\"target\">\n      <div class=\"list-item-inner\">\n        <ListDmd v-if=\"dmdIsVisible\" :index=\"index\" :table=\"tableIndex\" :image=\"image\" :worker=\"worker\"></ListDmd>\n      </div>\n    </div>\n</template>\n\n<script>\nimport ListDmd from '../../dmd/ListDmd.vue'\nimport { useIntersectionObserver } from '@vueuse/core'\nimport { ref } from 'vue'\n\nexport default {\n  name: 'SpriteItem',\n  props: {\n    image: Uint8Array,\n    index: Number,\n    tableIndex: Number,\n    worker: Worker\n  },\n  components: {\n    ListDmd\n  },\n  data() {\n    return {\n      isDrawn: false\n    }\n  },\n  setup() {\n    const target = ref(null);\n    const dmdIsVisible = ref(false);\n    // lazy-load the dmds by only rendering when they appear on screen:\n    useIntersectionObserver(\n      target,\n      ([{ isIntersecting }]) => {\n        // only trigger the state change once:\n        if(dmdIsVisible.value == false) {\n          dmdIsVisible.value = isIntersecting;\n          stop();\n        }\n      },\n      {\n        rootMargin: \"200px\",\n        threshold: 0\n      }\n    )\n    return {\n      target,\n      dmdIsVisible,\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n\n.list-item-sprite {\n  width: 100%;\n  max-width: 23.5rem;\n  height: 8.2rem;\n  background: var(--grey5);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  box-shadow: var(--shadow-btn-default);\n  margin: 0 auto;\n}\n\n.list-item-sprite:hover {\n  background: var(--grey4);\n  box-shadow: var(--shadow-btn-hover);\n}\n\n.list-item-inner {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  \n}\n\n</style>","import { render } from \"./SpriteItem.vue?vue&type=template&id=5547145e&scoped=true\"\nimport script from \"./SpriteItem.vue?vue&type=script&lang=js\"\nexport * from \"./SpriteItem.vue?vue&type=script&lang=js\"\n\nimport \"./SpriteItem.vue?vue&type=style&index=0&id=5547145e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/permartinson/Documents/GitHub/wpcedit/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5547145e\"]])\n\nexport default __exports__"],"names":["class","ref","width","height","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","name","props","image","Uint8Array","index","Number","data","isDrawn","methods","drawImage","DOT_SIZE","IMAGE_SIZE","canvas","this","$refs","dmd","ctx","getContext","i","dotX","dotY","Math","floor","dotVal","getDotValue","beginPath","rect","fillStyle","fill","imageData","col","byte","bitPos","bit","mounted","__exports__","render","onClick","_ctx","$props","tableIndex","$setup","_createBlock","_component_ListDmd","table","worker","Worker","components","ListDmd","setup","target","dmdIsVisible","useIntersectionObserver","isIntersecting","value","stop","rootMargin","threshold"],"sourceRoot":""}