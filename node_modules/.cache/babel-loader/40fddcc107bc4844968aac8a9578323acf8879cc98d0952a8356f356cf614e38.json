{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ce660642\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"controls\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"title\"\n};\nconst _hoisted_3 = {\n  key: 2,\n  class: \"nav-btns\"\n};\nconst _hoisted_4 = {\n  class: \"dmd-container\"\n};\nconst _hoisted_5 = {\n  ref: \"dmd\",\n  width: \"512\",\n  height: \"128\",\n  class: \"dmd\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_CheckBox = _resolveComponent(\"CheckBox\");\n  const _component_SmallIcon = _resolveComponent(\"SmallIcon\");\n  const _component_MinimalButton = _resolveComponent(\"MinimalButton\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [$props.title ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, _toDisplayString($props.title), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $props.checkbox ? (_openBlock(), _createBlock(_component_CheckBox, {\n    key: 1,\n    onChange: $options.checked,\n    checked: $props.isEnabled,\n    label: $props.checkbox,\n    ref: \"checkbox\"\n  }, null, 8 /* PROPS */, [\"onChange\", \"checked\", \"label\"])) : _createCommentVNode(\"v-if\", true), $props.navBtns ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_MinimalButton, {\n    onClick: _cache[0] || (_cache[0] = $event => {\n      this.$emit('prev');\n    }),\n    size: \"small\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_SmallIcon, {\n      type: \"left\"\n    }), _createTextVNode(\"Previous\")]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_MinimalButton, {\n    onClick: _cache[1] || (_cache[1] = $event => {\n      this.$emit('next');\n    }),\n    size: \"small\",\n    class: \"btn-next\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Next\"), _createVNode(_component_SmallIcon, {\n      type: \"right\"\n    })]),\n    _: 1 /* STABLE */\n  })])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"canvas\", _hoisted_5, null, 512 /* NEED_PATCH */)])]);\n}","map":{"version":3,"mappings":";;;EAESA,KAAK,EAAC;AAAU;;;EACHA,KAAK,EAAC;;;;EAEFA,KAAK,EAAC;;;EAKvBA,KAAK,EAAC;AAAe;;EAChBC,GAAG,EAAC,KAAK;EAACC,KAAK,EAAC,KAAK;EAACC,MAAM,EAAC,KAAK;EAACH,KAAK,EAAC;;;;;;uBAVrDI,oBAYM,cAXJC,oBAOM,OAPNC,UAOM,GANKC,YAAK,kBAAdH,oBAA6C,KAA7CI,UAA6C,mBAAZD,YAAK,uDACtBA,eAAQ,kBAAxBE,aAA6GC;;IAAlFC,QAAM,EAAEC,gBAAO;IAAGC,OAAO,EAAEN,gBAAS;IAAGO,KAAK,EAAEP,eAAQ;IAAEN,GAAG,EAAC;kGAC5EM,cAAO,kBAAlBH,oBAGM,OAHNW,UAGM,GAFJC,aAAoHC;IAApGC,OAAK;MAAA,KAAOC,KAAK;IAAA;IAAWC,IAAI,EAAC;;sBAAQ,MAAmC,CAAnCJ,aAAmCK;MAAxBC,IAAI,EAAC;IAAM,qBAAa,UAAQ;;MACpGN,aAAkIC;IAAlHC,OAAK;MAAA,KAAOC,KAAK;IAAA;IAAWC,IAAI,EAAC,OAAO;IAACpB,KAAK,EAAC;;sBAAW,MAAI,kBAAJ,MAAI,gBAAoCqB;MAAzBC,IAAI,EAAC;IAAO;;+CAGzGjB,oBAEM,OAFNkB,UAEM,GADJlB,oBAAgE,UAAhEmB,UAAgE","names":["class","ref","width","height","_createElementBlock","_createElementVNode","_hoisted_1","$props","_hoisted_2","_createBlock","_component_CheckBox","onChange","$options","checked","label","_hoisted_3","_createVNode","_component_MinimalButton","onClick","$emit","size","_component_SmallIcon","type","_hoisted_4","_hoisted_5"],"sourceRoot":"","sources":["/Users/permartinson/Documents/GitHub/wpcedit-vue/src/components/dmd/SubDmd.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"controls\">\n      <p v-if=\"title\" class=\"title\">{{ title }}</p>\n      <CheckBox v-if=\"checkbox\" @change=\"checked\" :checked=\"isEnabled\" :label=\"checkbox\" ref=\"checkbox\"></CheckBox>\n      <div v-if=\"navBtns\" class=\"nav-btns\">\n        <MinimalButton @click=\"this.$emit('prev');\" size=\"small\"><SmallIcon type=\"left\"></SmallIcon>Previous</MinimalButton>\n        <MinimalButton @click=\"this.$emit('next');\" size=\"small\" class=\"btn-next\">Next<SmallIcon type=\"right\"></SmallIcon></MinimalButton>\n      </div>\n    </div>\n    <div class=\"dmd-container\">\n      <canvas ref=\"dmd\" width=\"512\" height=\"128\" class=\"dmd\"></canvas>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CheckBox from '../ui/CheckBox.vue';\nimport MinimalButton from '../ui/buttons/MinimalButton.vue';\nimport SmallIcon from '../icons/SmallIcon.vue';\n\nexport default {\n  name: 'SubDmd',\n  components: {\n    CheckBox,\n    MinimalButton,\n    SmallIcon\n\n  },\n  props: {\n    image: Uint8Array,\n    title: String,\n    checkbox: String,\n    navBtns: Boolean,\n    isEnabled: Boolean\n  },\n  methods: {\n    drawImage() {\n        const DOT_SIZE = 4;\n        const canvas = this.$refs.dmd;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        let color =  \"130, 100, 80\";\n        if(this.isEnabled) {\n          color = \"220, 133, 33\";\n        }\n        for(let i=0; i<128*32; i++) {\n            const dotX = (i % 128) * DOT_SIZE + DOT_SIZE/2;\n            const dotY = Math.floor(i / 128) * DOT_SIZE + DOT_SIZE/2;\n            const dotVal = this.getDotValue(this.image,i);\n            ctx.beginPath();\n            ctx.arc(dotX, dotY, DOT_SIZE/2*0.9, 0, 2 * Math.PI, false);\n            ctx.fillStyle = `rgba(${color}, ${dotVal})`;\n            ctx.fill();\n        }\n    },\n    getDotValue(imageData,index) {\n        const width = 128;\n        const col = index % width;\n        const byte = Math.floor(index/8);\n        const bitPos = (col % 8);\n        const bit =  ( imageData[byte] & 0xFF ) >>(bitPos) & 1;\n        return bit;\n    },\n    checked(value) {\n      this.$emit('enabled', value);\n    }\n  },\n  mounted() {\n    this.drawImage();\n  },\n  updated() {\n    this.drawImage();\n  }\n}\n\n</script>\n\n<style scoped>\n.controls {\n  height: 3.2rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.nav-btns {\n  display: flex;\n}\n.title {\n  font-size: var(--text-md);\n  font-weight: 700;\n  color: var(--grey7);\n}\n.btn-next {\n  margin-left: var(--space-sm);\n}\n.dmd-container {\n  background: var(--black);\n}\n.dmd {\n  width: 100%;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}