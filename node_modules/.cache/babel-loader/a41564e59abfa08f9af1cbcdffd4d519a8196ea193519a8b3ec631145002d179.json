{"ast":null,"code":"import BaseModal from './BaseModal.vue';\nimport ModalHeader from './ModalHeader.vue';\nimport MainDmd from '../../dmd/MainDmd.vue';\nimport SubDmd from '../../dmd/SubDmd.vue';\nimport CheckBox from '../../ui/CheckBox.vue';\nimport store from \"../../../stores/store.js\";\nimport { useWpcEditStore } from '../../../stores/wpcEditStore.js';\nconst WpcEditStore = useWpcEditStore(store);\nexport default {\n  name: 'SpriteModal',\n  components: {\n    BaseModal,\n    ModalHeader,\n    MainDmd,\n    SubDmd,\n    CheckBox\n  },\n  setup() {},\n  data() {\n    return {\n      doBlend: true,\n      doMerge0: false,\n      doMerge1: false,\n      offset: 0,\n      blendOffset: 1,\n      merge0Offset: 2,\n      merge1Offset: 3\n    };\n  },\n  props: {\n    show: Boolean,\n    index: Number\n  },\n  computed: {\n    planeIndices() {\n      const currIndex = Math.max(this.index + this.offset, 0);\n      return {\n        current: currIndex,\n        blend: Math.max(currIndex + this.blendOffset, 0),\n        merge0: Math.max(currIndex + this.merge0Offset, 0),\n        merge1: Math.max(currIndex + this.merge1Offset, 0)\n      };\n    }\n  },\n  methods: {\n    plane0() {\n      return this.mainPlane();\n    },\n    plane1() {\n      if (this.doBlend) {\n        return this.blendPlane();\n      }\n      return this.mainPlane();\n    },\n    mainPlane() {\n      const indices = this.planeIndices;\n      if (this.doMerge0) {\n        const image1 = WpcEditStore.getFullFrameImageAt(indices.current).image;\n        const plane1 = WpcEditStore.getFullFrameImageAt(indices.merge0);\n        const image2 = plane1.image;\n        const mask = plane1.mask;\n        return WpcEditStore.mergeImages(image1, image2, mask);\n      }\n      return WpcEditStore.getFullFrameImageAt(indices.current).image;\n    },\n    blendPlane() {\n      const indices = this.planeIndices;\n      if (this.doMerge1) {\n        const image1 = WpcEditStore.getFullFrameImageAt(indices.blend).image;\n        const plane1 = WpcEditStore.getFullFrameImageAt(indices.merge1);\n        const image2 = plane1.image;\n        const mask = plane1.mask;\n        return WpcEditStore.mergeImages(image1, image2, mask);\n      }\n      return WpcEditStore.getFullFrameImageAt(indices.blend).image;\n    },\n    merge0Plane() {\n      const indices = this.planeIndices;\n      return WpcEditStore.getFullFrameImageAt(indices.merge0).image;\n    },\n    merge1Plane() {\n      const indices = this.planeIndices;\n      return WpcEditStore.getFullFrameImageAt(indices.merge1).image;\n    },\n    setBlendStatus(state) {\n      if (state == true) {\n        this.doBlend = true;\n      } else if (state == false) {\n        this.doBlend = false;\n      }\n    },\n    setMerge0Status(state) {\n      if (state == true) {\n        this.doMerge0 = true;\n      } else if (state == false) {\n        this.doMerge0 = false;\n      }\n    },\n    setMerge1Status(state) {\n      if (state == true) {\n        this.doMerge1 = true;\n      } else if (state == false) {\n        this.doMerge1 = false;\n      }\n    },\n    setBetween0Status(state) {\n      if (state == true) {\n        this.doInBetween0 = true;\n      } else if (state == false) {\n        this.doInBetween0 = false;\n      }\n    },\n    setBetween1Status(state) {\n      if (state == true) {\n        this.doInBetween1 = true;\n      } else if (state == false) {\n        this.doInBetween1 = false;\n      }\n    },\n    goToNextBlendPlane() {\n      this.blendOffset++;\n    },\n    goToPrevBlendPlane() {\n      this.blendOffset--;\n    },\n    goToNextMerge0Plane() {\n      this.merge0Offset++;\n    },\n    goToPrevMerge0Plane() {\n      this.merge0Offset--;\n    },\n    goToNextMerge1Plane() {\n      this.merge1Offset++;\n    },\n    goToPrevMerge1Plane() {\n      this.merge1Offset--;\n    },\n    goNext() {\n      this.offset++;\n      this.setInitValues();\n    },\n    goPrev() {\n      if (this.planeIndices.current > 0) {\n        this.offset--;\n      }\n      this.setInitValues();\n    },\n    goN2() {\n      this.offset += 2;\n      this.setInitValues();\n    },\n    goP2() {\n      if (this.planeIndices.current > 0) {\n        this.offset -= 2;\n      }\n      this.setInitValues();\n    },\n    setInitValues() {\n      // reset the values (or get from a store when that ha been implemented)\n      this.doBlend = true;\n      this.doMerge0 = false;\n      this.doMerge1 = false;\n      this.blendOffset = 1;\n      this.merge0Offset = 2;\n      this.merge1Offset = 3;\n    }\n  },\n  updated() {\n    this.offset = 0;\n    this.setInitValues();\n  }\n};","map":{"version":3,"mappings":"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","names":["BaseModal","ModalHeader","MainDmd","SubDmd","CheckBox","store","useWpcEditStore","WpcEditStore","name","components","setup","data","doBlend","doMerge0","doMerge1","offset","blendOffset","merge0Offset","merge1Offset","props","show","Boolean","index","Number","computed","planeIndices","currIndex","Math","max","current","blend","merge0","merge1","methods","plane0","mainPlane","plane1","blendPlane","indices","image1","getFullFrameImageAt","image","image2","mask","mergeImages","merge0Plane","merge1Plane","setBlendStatus","state","setMerge0Status","setMerge1Status","setBetween0Status","doInBetween0","setBetween1Status","doInBetween1","goToNextBlendPlane","goToPrevBlendPlane","goToNextMerge0Plane","goToPrevMerge0Plane","goToNextMerge1Plane","goToPrevMerge1Plane","goNext","setInitValues","goPrev","goN2","goP2","updated"],"sourceRoot":"","sources":["/Users/permartinson/Documents/GitHub/wpcedit-vue/src/components/ui/modals/FullFrameModal.vue"],"sourcesContent":["<template>\n    <BaseModal :show=\"show\" class=\"modal-mask\" @close=\"$emit('close')\">\n        <ModalHeader\n            :stepBtns=\"true\"\n            :closeBtn=\"true\"\n            title=\"Test title\"\n            @next=\"goNext()\"\n            @prev=\"goPrev()\"\n            @next2=\"goN2()\"\n            @prev2=\"goP2()\"\n            @close=\"$emit('close')\">\n        </ModalHeader>\n        <div class=\"modal-body\">\n            <MainDmd :plane0=\"plane0()\" :plane1=\"plane1()\"></MainDmd>\n            <div class=\"sub-dmds blend\">\n                <SubDmd\n                    class=\"plane plane0\"\n                    title=\"This plane, index\"\n                    :isEnabled=\"true\"\n                    :plane=\"mainPlane()\">\n                </SubDmd>\n                <SubDmd\n                    class=\"plane plane1\"\n                    checkbox=\"Blend with index \"\n                    :plane=\"blendPlane()\"\n                    :isEnabled=\"this.doBlend\"\n                    :navBtns=\"true\"\n                    @next=\"goToNextBlendPlane()\"\n                    @prev=\"goToPrevBlendPlane()\"\n                    @enabled=\"setBlendStatus\">\n                </SubDmd>\n            </div>\n            <div class=\"sub-dmds merge\">\n                <SubDmd\n                class=\"plane plane1\"\n                    checkbox=\"Merge with index \"\n                    :plane=\"merge0Plane()\"\n                    :isEnabled=\"this.doMerge0\"\n                    :navBtns=\"true\"\n                    @next=\"goToNextMerge0Plane()\"\n                    @prev=\"goToPrevMerge0Plane()\"\n                    @enabled=\"setMerge0Status\">\n                </SubDmd>\n                <SubDmd\n                    class=\"plane plane1\"\n                    checkbox=\"Merge with index \"\n                    :plane=\"merge1Plane()\"\n                    :isEnabled=\"this.doMerge1\"\n                    :navBtns=\"true\"\n                    @next=\"goToNextMerge1Plane()\"\n                    @prev=\"goToPrevMerge1Plane()\"\n                    @enabled=\"setMerge1Status\">\n                </SubDmd>\n                <CheckBox @change=\"doInBetween0\" :checked=\"true\" label=\"Also apply the frames in between\" ref=\"inBetween0\"></CheckBox>\n                <CheckBox @change=\"doInBetween1\" :checked=\"true\" label=\"Also apply the frames in between\" ref=\"inBetween1\"></CheckBox>\n            </div>\n        </div>\n    </BaseModal>\n</template>\n\n<script>\nimport BaseModal from './BaseModal.vue';\nimport ModalHeader from './ModalHeader.vue';\nimport MainDmd from '../../dmd/MainDmd.vue';\nimport SubDmd from '../../dmd/SubDmd.vue';\nimport CheckBox from '../../ui/CheckBox.vue';\nimport store from \"../../../stores/store.js\";\nimport { useWpcEditStore } from '../../../stores/wpcEditStore.js'\n\nconst WpcEditStore = useWpcEditStore(store);\n\nexport default {\n    name: 'SpriteModal',\n    components: { \n        BaseModal,\n        ModalHeader,\n        MainDmd,\n        SubDmd,\n        CheckBox\n    },\n    setup() {\n    },\n    data() {\n        return {\n            doBlend: true,\n            doMerge0: false,\n            doMerge1: false,\n            offset: 0,\n            blendOffset: 1,\n            merge0Offset: 2,\n            merge1Offset: 3\n        }\n    },\n    props: {\n        show: Boolean,\n        index: Number\n    },\n    computed: {\n        planeIndices() {\n            const currIndex = Math.max(this.index+this.offset,0);\n            return {\n                current: currIndex,\n                blend: Math.max(currIndex+this.blendOffset,0),\n                merge0: Math.max(currIndex+this.merge0Offset,0),\n                merge1: Math.max(currIndex+this.merge1Offset,0)\n            }\n        }\n    },\n    methods: {\n        plane0() {\n            return this.mainPlane();\n        },\n        plane1() {\n            if(this.doBlend) {\n                return this.blendPlane();\n            }\n            return this.mainPlane();\n        },\n        mainPlane() {\n            const indices = this.planeIndices;\n            if(this.doMerge0) {\n                const image1 = WpcEditStore.getFullFrameImageAt(indices.current).image;\n                const plane1 = WpcEditStore.getFullFrameImageAt(indices.merge0);\n                const image2 = plane1.image;\n                const mask = plane1.mask;\n                return WpcEditStore.mergeImages(image1,image2,mask);\n            }\n            return WpcEditStore.getFullFrameImageAt(indices.current).image;\n        },\n        blendPlane() {\n            const indices = this.planeIndices;\n            if(this.doMerge1) {\n                const image1 = WpcEditStore.getFullFrameImageAt(indices.blend).image;\n                const plane1 = WpcEditStore.getFullFrameImageAt(indices.merge1);\n                const image2 = plane1.image;\n                const mask = plane1.mask;\n                return WpcEditStore.mergeImages(image1,image2,mask);\n            }\n            return WpcEditStore.getFullFrameImageAt(indices.blend).image;\n        },\n        merge0Plane() {\n            const indices = this.planeIndices;\n            return WpcEditStore.getFullFrameImageAt(indices.merge0).image;\n        },\n        merge1Plane() {\n            const indices = this.planeIndices;\n            return WpcEditStore.getFullFrameImageAt(indices.merge1).image;\n        },\n        setBlendStatus(state) {\n            if(state == true) {\n                this.doBlend = true;\n            } else if(state == false) {\n                this.doBlend = false;\n            }\n        },\n        setMerge0Status(state) {\n            if(state == true) {\n                this.doMerge0 = true;\n            } else if(state == false) {\n                this.doMerge0 = false;\n            }\n        },\n        setMerge1Status(state) {\n            if(state == true) {\n                this.doMerge1 = true;\n            } else if(state == false) {\n                this.doMerge1 = false;\n            }\n        },\n        setBetween0Status(state) {\n            if(state == true) {\n                this.doInBetween0 = true;\n            } else if(state == false) {\n                this.doInBetween0 = false;\n            }\n        },\n        setBetween1Status(state) {\n            if(state == true) {\n                this.doInBetween1 = true;\n            } else if(state == false) {\n                this.doInBetween1 = false;\n            }\n        },\n        goToNextBlendPlane() {\n            this.blendOffset++;\n        },\n        goToPrevBlendPlane() {\n            this.blendOffset--;\n        },\n        goToNextMerge0Plane() {\n            this.merge0Offset++;\n        },\n        goToPrevMerge0Plane() {\n            this.merge0Offset--;\n        },\n        goToNextMerge1Plane() {\n            this.merge1Offset++;\n        },\n        goToPrevMerge1Plane() {\n            this.merge1Offset--;\n        },\n        goNext() {\n            this.offset++;\n            this.setInitValues();\n        },\n        goPrev() {\n            if(this.planeIndices.current > 0) {\n                this.offset--;\n            }\n            this.setInitValues();\n        },\n        goN2() {\n            this.offset+=2;\n            this.setInitValues();\n        },\n        goP2() {\n            if(this.planeIndices.current > 0) {\n                this.offset-=2;\n            }\n            this.setInitValues();\n        },\n        setInitValues() {\n            // reset the values (or get from a store when that ha been implemented)\n            this.doBlend = true;\n            this.doMerge0 = false;\n            this.doMerge1 = false;\n            this.blendOffset = 1;\n            this.merge0Offset = 2;\n            this.merge1Offset = 3;\n        }\n    },\n    updated() {\n        this.offset = 0;\n        this.setInitValues();\n    }\n}\n</script>\n\n<style scoped>\n.sub-dmds {\n    margin-top: var(--space-md);\n    display: grid;\n    gap: var(--space-md);\n    grid-template-columns: 1fr 1fr;\n}\n.plane {\n    justify-self: left;\n}\n.modal-body {\n    margin: 0 var(--space-md);\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}