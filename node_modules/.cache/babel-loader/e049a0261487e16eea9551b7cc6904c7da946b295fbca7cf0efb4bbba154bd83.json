{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport FileDrop from '../components/ui/FileDrop.vue';\nimport FeatureButton from '../components/ui/buttons/FeatureButton.vue';\nimport store from \"../stores/store.js\";\nimport { useAppState } from '../stores/appState.js';\nimport { useWpcEditStore } from '../stores/wpcEditStore.js';\nimport { storeToRefs } from 'pinia';\nconst AppState = useAppState(store);\nconst WpcEditStore = useWpcEditStore(store);\nexport default {\n  name: 'HomeView',\n  components: {\n    FileDrop,\n    FeatureButton\n  },\n  props: {},\n  data() {\n    return {};\n  },\n  setup() {\n    const {\n      romIsLoaded\n    } = storeToRefs(WpcEditStore);\n    return {\n      romIsLoaded\n    };\n  },\n  beforeRouteEnter() {\n    AppState.setViewTitle(\"WPC Edit\");\n    AppState.isAtHomeView = true;\n  },\n  methods: {\n    readBytes(file) {\n      const reader = new FileReader();\n      reader.addEventListener(\"loadend\", function () {\n        if (reader.result) {\n          const bytes = new Uint8Array(reader.result);\n          WpcEditStore.loadRom(bytes, file.name);\n        }\n      });\n      reader.readAsArrayBuffer(file);\n    },\n    restoreFromCache() {\n      console.log(\"this.romIsLoaded : \" + this.romIsLoaded);\n      console.log(\"this.currentRomData : \" + this.currentRomData);\n      // restore rom data from cache:\n      if (this.romIsLoaded && !this.currentRomData) {\n        console.log(\"get from cache\");\n        WpcEditStore.getRomFromCache();\n      }\n      // never give access to any sub pages if no rom is loaded:\n      if (!this.romIsLoaded) {\n        this.$router.push('/');\n      }\n    }\n  },\n  mounted() {}\n};","map":{"version":3,"mappings":";AAcI,OAAOA,QAAO,MAAO,+BAA8B;AACnD,OAAOC,aAAY,MAAO,4CAA2C;AACrE,OAAOC,KAAI,MAAO,oBAAoB;AACtC,SAASC,WAAU,QAAS,uBAAuB;AACnD,SAASC,eAAc,QAAS,2BAA2B;AAC3D,SAASC,WAAU,QAAS,OAAO;AAEnC,MAAMC,QAAO,GAAIH,WAAW,CAACD,KAAK,CAAC;AACnC,MAAMK,YAAW,GAAIH,eAAe,CAACF,KAAK,CAAC;AAE3C,eAAe;EACbM,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVT,QAAQ;IACRC;EACF,CAAC;EACDS,KAAK,EAAE,CACP,CAAC;EACDC,IAAI,GAAG;IACH,OAAO,CAEP;EACJ,CAAC;EACDC,KAAK,GAAG;IACN,MAAM;MAAEC;IAAY,IAAIR,WAAW,CAACE,YAAY,CAAC;IACjD,OAAO;MACLM;IACF;EACF,CAAC;EACDC,gBAAgB,GAAG;IACjBR,QAAQ,CAACS,YAAY,CAAC,UAAU,CAAC;IACjCT,QAAQ,CAACU,YAAW,GAAI,IAAI;EAC9B,CAAC;EACDC,OAAO,EAAE;IACPC,SAAS,CAACC,IAAI,EAAE;MACd,MAAMC,MAAK,GAAI,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,gBAAgB,CAAC,SAAS,EAAE,YAAW;QAC1C,IAAIF,MAAM,CAACG,MAAM,EAAE;UACjB,MAAMC,KAAI,GAAI,IAAIC,UAAU,CAACL,MAAM,CAACG,MAAM,CAAC;UAC3ChB,YAAY,CAACmB,OAAO,CAACF,KAAK,EAAEL,IAAI,CAACX,IAAI,CAAC;QACxC;MACJ,CAAC,CAAC;MACFY,MAAM,CAACO,iBAAiB,CAACR,IAAI,CAAC;IAChC,CAAC;IACDS,gBAAgB,GAAG;MACjBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,GAAC,IAAI,CAACjB,WAAW;MAClDgB,OAAO,CAACC,GAAG,CAAC,wBAAwB,GAAC,IAAI,CAACC,cAAc;MACxD;MACA,IAAI,IAAI,CAAClB,WAAU,IAAK,CAAC,IAAI,CAACkB,cAAa,EAAI;QAC7CF,OAAO,CAACC,GAAG,CAAC,gBAAgB;QAC5BvB,YAAY,CAACyB,eAAe,EAAE;MAChC;MACA;MACA,IAAG,CAAC,IAAI,CAACnB,WAAW,EAAE;QACpB,IAAI,CAACoB,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MACxB;IACF;EACF,CAAC;EACDC,OAAO,GAAG,CACV;AACF","names":["FileDrop","FeatureButton","store","useAppState","useWpcEditStore","storeToRefs","AppState","WpcEditStore","name","components","props","data","setup","romIsLoaded","beforeRouteEnter","setViewTitle","isAtHomeView","methods","readBytes","file","reader","FileReader","addEventListener","result","bytes","Uint8Array","loadRom","readAsArrayBuffer","restoreFromCache","console","log","currentRomData","getRomFromCache","$router","push","mounted"],"sourceRoot":"","sources":["/Users/permartinson/Documents/GitHub/wpcedit-vue/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div>\nÂ¨    <div v-if=\"romIsLoaded\" class=\"navigation\">\n        <FeatureButton icon=\"fullframe\" @click=\"this.$router.push('/fullframe')\">Full frame graphics</FeatureButton>\n        <FeatureButton icon=\"sprites\" @click=\"this.$router.push('/sprites')\">Sprites and fonts</FeatureButton>\n        <FeatureButton icon=\"checksum\" @click=\"this.$router.push('/checksum')\">Checksum tool</FeatureButton>\n        <FeatureButton icon=\"settings\" @click=\"this.$router.push('/settings')\">Settings</FeatureButton>\n    </div>\n    <FileDrop v-if=\"!romIsLoaded\" @loaded=\"readBytes\"></FileDrop>\n    <FeatureButton icon=\"settings\" @click=\"restoreFromCache\">RESTORE</FeatureButton>\n  </div>\n</template>\n  \n<script>\n    import FileDrop from '../components/ui/FileDrop.vue'\n    import FeatureButton from '../components/ui/buttons/FeatureButton.vue'\n    import store from \"../stores/store.js\";\n    import { useAppState } from '../stores/appState.js';\n    import { useWpcEditStore } from '../stores/wpcEditStore.js';\n    import { storeToRefs } from 'pinia';\n\n    const AppState = useAppState(store);\n    const WpcEditStore = useWpcEditStore(store);\n\n    export default {\n      name: 'HomeView',\n      components: {\n        FileDrop,\n        FeatureButton\n      },\n      props: {\n      },\n      data() {\n          return {\n\n          }\n      },\n      setup() {\n        const { romIsLoaded } = storeToRefs(WpcEditStore);\n        return {\n          romIsLoaded\n        }\n      },\n      beforeRouteEnter() {\n        AppState.setViewTitle(\"WPC Edit\");\n        AppState.isAtHomeView = true;\n      },\n      methods: {\n        readBytes(file) {\n          const reader = new FileReader();\n          reader.addEventListener(\"loadend\", function() {\n              if (reader.result) {\n                const bytes = new Uint8Array(reader.result);\n                WpcEditStore.loadRom(bytes, file.name);\n              }\n          });\n          reader.readAsArrayBuffer(file);\n        },\n        restoreFromCache() {\n          console.log(\"this.romIsLoaded : \"+this.romIsLoaded)\n          console.log(\"this.currentRomData : \"+this.currentRomData)\n          // restore rom data from cache:\n          if( this.romIsLoaded && !this.currentRomData ) {\n            console.log(\"get from cache\")\n            WpcEditStore.getRomFromCache();\n          }\n          // never give access to any sub pages if no rom is loaded:\n          if(!this.romIsLoaded) {\n            this.$router.push('/');\n          }\n        }\n      },\n      mounted() {\n      }\n    }\n  \n  </script>\n  \n  <style scoped>\n  \n  .navigation {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    margin-top: var(--space-xl);\n  }\n  .navigation a {\n    text-decoration: none;\n  }\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}