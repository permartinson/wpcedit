{"ast":null,"code":"require(\"core-js/modules/web.dom-exception.stack.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\nfunction writeBmp(arr, depth, width, height) {\n  // Borrowed from https://gist.github.com/vukicevic/8112515\n  let offset, data;\n  function conv(size) {\n    return String.fromCharCode(size & 0xff, size >> 8 & 0xff, size >> 16 & 0xff, size >> 24 & 0xff);\n  }\n  offset = depth <= 8 ? 54 + Math.pow(2, depth) * 4 : 54;\n\n  //BMP Header\n  data = 'BM'; // ID field\n  data += conv(offset + arr.length); // BMP size\n  data += conv(0); // unused\n  data += conv(offset); // pixel data offset\n\n  //DIB Header\n  data += conv(40); // DIB header length\n  data += conv(width); // image width\n  data += conv(height); // image height\n  data += String.fromCharCode(1, 0); // colour panes\n  data += String.fromCharCode(depth, 0); // bits per pixel\n  data += conv(0); // compression method\n  data += conv(arr.length); // size of the raw data\n  data += conv(2835); // horizontal print resolution\n  data += conv(2835); // vertical print resolution\n  data += conv(0); // colour palette, 0 == 2^n\n  data += conv(0); // important colours\n\n  //Grayscale tables for bit depths <= 8\n  if (depth <= 8) {\n    data += conv(0);\n    for (let s = Math.floor(255 / (Math.pow(2, depth) - 1)), i = s; i < 256; i += s) {\n      data += conv(i + i * 256 + i * 65536);\n    }\n  }\n\n  //Pixel data\n  data += String.fromCharCode.apply(String, arr);\n  return window.btoa(data);\n}\nfunction saveDataAsFile(data, fileName, mimeType) {\n  // Hacky but common way to generate and download data as a file\n  const blob = new Blob([data], {\n    type: mimeType\n  });\n  const url = window.URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = fileName;\n  document.body.appendChild(a);\n  a.style = 'display: none';\n  a.click();\n  a.remove();\n  setTimeout(function () {\n    return window.URL.revokeObjectURL(url);\n  }, 1000);\n}\nfunction mirrorBits(n) {\n  // Borrowed from https://www.w3resource.com/javascript-exercises/javascript-basic-exercise-127.php\n  let t = n.toString(2).split(\"\");\n  let str_len = t.length;\n  for (let i = 0; i < 8 - str_len; i++) {\n    t.unshift(\"0\");\n  }\n  return parseInt(t.reverse().join(\"\"), 2);\n}\nmodule.exports = {\n  writeBmp,\n  mirrorBits,\n  saveDataAsFile\n};","map":{"version":3,"names":["writeBmp","arr","depth","width","height","offset","data","conv","size","String","fromCharCode","Math","pow","length","s","floor","i","apply","window","btoa","saveDataAsFile","fileName","mimeType","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","style","click","remove","setTimeout","revokeObjectURL","mirrorBits","n","t","toString","split","str_len","unshift","parseInt","reverse","join","module","exports"],"sources":["/Users/permartinson/Documents/GitHub/wpcedit/src/helpers/export.js"],"sourcesContent":["function writeBmp(arr, depth, width, height) {\n    // Borrowed from https://gist.github.com/vukicevic/8112515\n    let offset, data;\n\n    function conv(size) {\n        return String.fromCharCode(size&0xff, (size>>8)&0xff, (size>>16)&0xff, (size>>24)&0xff);\n    }\n\n    offset = depth <= 8 ? 54 + Math.pow(2, depth)*4 : 54;\n\n    //BMP Header\n    data  = 'BM';                          // ID field\n    data += conv(offset + arr.length);     // BMP size\n    data += conv(0);                       // unused\n    data += conv(offset);                  // pixel data offset\n    \n    //DIB Header\n    data += conv(40);                       // DIB header length\n    data += conv(width);                    // image width\n    data += conv(height);                   // image height\n    data += String.fromCharCode(1, 0);      // colour panes\n    data += String.fromCharCode(depth, 0);  // bits per pixel\n    data += conv(0);                        // compression method\n    data += conv(arr.length);               // size of the raw data\n    data += conv(2835);                     // horizontal print resolution\n    data += conv(2835);                     // vertical print resolution\n    data += conv(0);                        // colour palette, 0 == 2^n\n    data += conv(0);                        // important colours\n    \n    //Grayscale tables for bit depths <= 8\n    if (depth <= 8) {\n        data += conv(0);\n        \n        for (let s = Math.floor(255/(Math.pow(2, depth)-1)), i = s; i < 256; i += s)  {\n            data += conv(i + i*256 + i*65536);\n        }\n    }\n    \n    //Pixel data\n    data += String.fromCharCode.apply(String, arr);\n\n    return window.btoa(data);\n}\n\nfunction saveDataAsFile(data,fileName,mimeType) {\n    // Hacky but common way to generate and download data as a file\n    const blob = new Blob([data], {\n        type: mimeType\n    });\n    const url = window.URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = fileName;\n    document.body.appendChild(a);\n    a.style = 'display: none';\n    a.click();\n    a.remove();\n\n    setTimeout(function() {\n        return window.URL.revokeObjectURL(url);\n    }, 1000);\n}\n\nfunction mirrorBits(n) {\n    // Borrowed from https://www.w3resource.com/javascript-exercises/javascript-basic-exercise-127.php\n    let t = n.toString(2).split(\"\");\n    let str_len = t.length;\n    for (let i = 0; i < 8 - str_len; i++) {\n        t.unshift(\"0\");\n    }\n    return parseInt(t.reverse().join(\"\"), 2);\n}\n\n\n\n\nmodule.exports = { writeBmp, mirrorBits, saveDataAsFile }"],"mappings":";;AAAA,SAASA,QAAQ,CAACC,GAAG,EAAEC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EAAE;EACzC;EACA,IAAIC,MAAM,EAAEC,IAAI;EAEhB,SAASC,IAAI,CAACC,IAAI,EAAE;IAChB,OAAOC,MAAM,CAACC,YAAY,CAACF,IAAI,GAAC,IAAI,EAAGA,IAAI,IAAE,CAAC,GAAE,IAAI,EAAGA,IAAI,IAAE,EAAE,GAAE,IAAI,EAAGA,IAAI,IAAE,EAAE,GAAE,IAAI,CAAC;EAC3F;EAEAH,MAAM,GAAGH,KAAK,IAAI,CAAC,GAAG,EAAE,GAAGS,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEV,KAAK,CAAC,GAAC,CAAC,GAAG,EAAE;;EAEpD;EACAI,IAAI,GAAI,IAAI,CAAC,CAA0B;EACvCA,IAAI,IAAIC,IAAI,CAACF,MAAM,GAAGJ,GAAG,CAACY,MAAM,CAAC,CAAC,CAAK;EACvCP,IAAI,IAAIC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAuB;EACvCD,IAAI,IAAIC,IAAI,CAACF,MAAM,CAAC,CAAC,CAAkB;;EAEvC;EACAC,IAAI,IAAIC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAuB;EACxCD,IAAI,IAAIC,IAAI,CAACJ,KAAK,CAAC,CAAC,CAAoB;EACxCG,IAAI,IAAIC,IAAI,CAACH,MAAM,CAAC,CAAC,CAAmB;EACxCE,IAAI,IAAIG,MAAM,CAACC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAM;EACxCJ,IAAI,IAAIG,MAAM,CAACC,YAAY,CAACR,KAAK,EAAE,CAAC,CAAC,CAAC,CAAE;EACxCI,IAAI,IAAIC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAwB;EACxCD,IAAI,IAAIC,IAAI,CAACN,GAAG,CAACY,MAAM,CAAC,CAAC,CAAe;EACxCP,IAAI,IAAIC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAqB;EACxCD,IAAI,IAAIC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAqB;EACxCD,IAAI,IAAIC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAwB;EACxCD,IAAI,IAAIC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAwB;;EAExC;EACA,IAAIL,KAAK,IAAI,CAAC,EAAE;IACZI,IAAI,IAAIC,IAAI,CAAC,CAAC,CAAC;IAEf,KAAK,IAAIO,CAAC,GAAGH,IAAI,CAACI,KAAK,CAAC,GAAG,IAAEJ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEV,KAAK,CAAC,GAAC,CAAC,CAAC,CAAC,EAAEc,CAAC,GAAGF,CAAC,EAAEE,CAAC,GAAG,GAAG,EAAEA,CAAC,IAAIF,CAAC,EAAG;MAC1ER,IAAI,IAAIC,IAAI,CAACS,CAAC,GAAGA,CAAC,GAAC,GAAG,GAAGA,CAAC,GAAC,KAAK,CAAC;IACrC;EACJ;;EAEA;EACAV,IAAI,IAAIG,MAAM,CAACC,YAAY,CAACO,KAAK,CAACR,MAAM,EAAER,GAAG,CAAC;EAE9C,OAAOiB,MAAM,CAACC,IAAI,CAACb,IAAI,CAAC;AAC5B;AAEA,SAASc,cAAc,CAACd,IAAI,EAACe,QAAQ,EAACC,QAAQ,EAAE;EAC5C;EACA,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAClB,IAAI,CAAC,EAAE;IAC1BmB,IAAI,EAAEH;EACV,CAAC,CAAC;EACF,MAAMI,GAAG,GAAGR,MAAM,CAACS,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;EAE5C,MAAMM,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACrCF,CAAC,CAACG,IAAI,GAAGN,GAAG;EACZG,CAAC,CAACI,QAAQ,GAAGZ,QAAQ;EACrBS,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,CAAC,CAAC;EAC5BA,CAAC,CAACO,KAAK,GAAG,eAAe;EACzBP,CAAC,CAACQ,KAAK,EAAE;EACTR,CAAC,CAACS,MAAM,EAAE;EAEVC,UAAU,CAAC,YAAW;IAClB,OAAOrB,MAAM,CAACS,GAAG,CAACa,eAAe,CAACd,GAAG,CAAC;EAC1C,CAAC,EAAE,IAAI,CAAC;AACZ;AAEA,SAASe,UAAU,CAACC,CAAC,EAAE;EACnB;EACA,IAAIC,CAAC,GAAGD,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,EAAE,CAAC;EAC/B,IAAIC,OAAO,GAAGH,CAAC,CAAC9B,MAAM;EACtB,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,GAAG8B,OAAO,EAAE9B,CAAC,EAAE,EAAE;IAClC2B,CAAC,CAACI,OAAO,CAAC,GAAG,CAAC;EAClB;EACA,OAAOC,QAAQ,CAACL,CAAC,CAACM,OAAO,EAAE,CAACC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAC5C;AAKAC,MAAM,CAACC,OAAO,GAAG;EAAEpD,QAAQ;EAAEyC,UAAU;EAAErB;AAAe,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}