{"ast":null,"code":"import FileDrop from '../components/ui/FileDrop.vue';\nimport FeatureButton from '../components/ui/buttons/FeatureButton.vue';\nimport DisclaimerModal from '../components/ui/modals/DisclaimerModal.vue';\nimport AlertDialog from '../components/ui/modals/AlertDialog.vue';\nimport StandardButton from '../components/ui/buttons/StandardButton.vue';\nimport store from \"../stores/store.js\";\nimport { useMainStore } from '../stores/mainStore.js';\nimport { storeToRefs } from 'pinia';\nconst MainStore = useMainStore(store);\nexport default {\n  name: 'HomeView',\n  components: {\n    FileDrop,\n    FeatureButton,\n    DisclaimerModal,\n    AlertDialog,\n    StandardButton\n  },\n  props: {},\n  data() {\n    return {\n      showDisclaimer: false,\n      tempFile: null,\n      showError: false,\n      errorMessage: ''\n    };\n  },\n  setup() {\n    const {\n      romIsLoaded,\n      warnings\n    } = storeToRefs(MainStore);\n    return {\n      romIsLoaded,\n      warnings\n    };\n  },\n  beforeRouteEnter() {\n    if (!MainStore.romIsLoaded) {\n      MainStore.setViewTitle(\"Load ROM\");\n    } else {\n      MainStore.setViewTitle(\"Home\");\n    }\n    MainStore.isAtHomeView = true;\n  },\n  methods: {\n    agreeClicked() {\n      if (this.tempFile != null) {\n        this.loadRom(this.tempFile);\n      }\n      this.warnings.load++;\n      this.showDisclaimer = false;\n    },\n    disagreeClicked() {\n      this.tempFile = null;\n      MainStore.unloadRom();\n      this.showDisclaimer = false;\n    },\n    okClicked() {\n      this.showError = false;\n    },\n    loadRom(file) {\n      const reader = new FileReader();\n      reader.addEventListener(\"loadend\", () => {\n        if (reader.result) {\n          const bytes = new Uint8Array(reader.result);\n          const result = MainStore.loadRom(bytes, file.name);\n          if (result.error) {\n            this.errorMessage = result.msg;\n            this.showError = true;\n            MainStore.unloadRom();\n          } else {\n            if (this.warnings.load < 1) {\n              this.tempFile = file;\n              this.showDisclaimer = true;\n            }\n          }\n        }\n      });\n      reader.readAsArrayBuffer(file);\n    }\n  }\n};","map":{"version":3,"mappings":"AAyBI,OAAOA,QAAO,MAAO,+BAA+B;AACpD,OAAOC,aAAY,MAAO,4CAA4C;AACtE,OAAOC,eAAc,MAAO,6CAA6C;AACzE,OAAOC,WAAU,MAAO,yCAAyC;AACjE,OAAOC,cAAa,MAAO,6CAA6C;AACxE,OAAOC,KAAI,MAAO,oBAAoB;AACtC,SAASC,YAAW,QAAS,wBAAwB;AACrD,SAASC,WAAU,QAAS,OAAO;AAEnC,MAAMC,SAAQ,GAAIF,YAAY,CAACD,KAAK,CAAC;AAErC,eAAe;EACbI,IAAI,EAAE,UAAU;EAChBC,UAAU,EAAE;IACVV,QAAQ;IACRC,aAAa;IACbC,eAAe;IACfC,WAAW;IACXC;EACF,CAAC;EACDO,KAAK,EAAE,CACP,CAAC;EACDC,IAAI,GAAG;IACH,OAAO;MACLC,cAAc,EAAE,KAAK;MACrBC,QAAQ,EAAE,IAAI;MACdC,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAE;IAChB;EACJ,CAAC;EACDC,KAAK,GAAG;IACN,MAAM;MAAEC,WAAW;MAAEC;IAAS,IAAIZ,WAAW,CAACC,SAAS,CAAC;IACxD,OAAO;MACLU,WAAW;MACXC;IACF;EACF,CAAC;EACDC,gBAAgB,GAAG;IACjB,IAAG,CAACZ,SAAS,CAACU,WAAW,EAAE;MACzBV,SAAS,CAACa,YAAY,CAAC,UAAU,CAAC;IACpC,OAAO;MACLb,SAAS,CAACa,YAAY,CAAC,MAAM,CAAC;IAChC;IACAb,SAAS,CAACc,YAAW,GAAI,IAAI;EAC/B,CAAC;EACDC,OAAO,EAAE;IACPC,YAAY,GAAG;MACb,IAAG,IAAI,CAACV,QAAO,IAAK,IAAI,EAAE;QACxB,IAAI,CAACW,OAAO,CAAC,IAAI,CAACX,QAAQ,CAAC;MAC7B;MACA,IAAI,CAACK,QAAQ,CAACO,IAAI,EAAE;MACpB,IAAI,CAACb,cAAa,GAAI,KAAK;IAC7B,CAAC;IACDc,eAAe,GAAG;MAChB,IAAI,CAACb,QAAO,GAAI,IAAI;MACpBN,SAAS,CAACoB,SAAS,EAAE;MACrB,IAAI,CAACf,cAAa,GAAI,KAAK;IAC7B,CAAC;IACDgB,SAAS,GAAG;MACV,IAAI,CAACd,SAAQ,GAAI,KAAK;IACxB,CAAC;IACDU,OAAO,CAACK,IAAI,EAAE;MACZ,MAAMC,MAAK,GAAI,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,gBAAgB,CAAC,SAAS,EAAE,MAAM;QACvC,IAAGF,MAAM,CAACG,MAAM,EAAE;UAChB,MAAMC,KAAI,GAAI,IAAIC,UAAU,CAACL,MAAM,CAACG,MAAM,CAAC;UAC3C,MAAMA,MAAK,GAAI1B,SAAS,CAACiB,OAAO,CAACU,KAAK,EAAEL,IAAI,CAACrB,IAAI,CAAC;UAClD,IAAGyB,MAAM,CAACG,KAAK,EAAE;YACf,IAAI,CAACrB,YAAW,GAAIkB,MAAM,CAACI,GAAG;YAC9B,IAAI,CAACvB,SAAQ,GAAI,IAAI;YACrBP,SAAS,CAACoB,SAAS,EAAE;UACvB,OAAO;YACL,IAAG,IAAI,CAACT,QAAQ,CAACO,IAAG,GAAI,CAAC,EAAE;cACzB,IAAI,CAACZ,QAAO,GAAIgB,IAAI;cACpB,IAAI,CAACjB,cAAa,GAAI,IAAI;YAC5B;UACF;QACF;MACF,CAAC,CAAC;MACFkB,MAAM,CAACQ,iBAAiB,CAACT,IAAI,CAAC;IAChC;EACF;AACF","names":["FileDrop","FeatureButton","DisclaimerModal","AlertDialog","StandardButton","store","useMainStore","storeToRefs","MainStore","name","components","props","data","showDisclaimer","tempFile","showError","errorMessage","setup","romIsLoaded","warnings","beforeRouteEnter","setViewTitle","isAtHomeView","methods","agreeClicked","loadRom","load","disagreeClicked","unloadRom","okClicked","file","reader","FileReader","addEventListener","result","bytes","Uint8Array","error","msg","readAsArrayBuffer"],"sourceRoot":"","sources":["/Users/permartinson/Documents/GitHub/wpcedit-vue/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"scroll-area\">\n    <div class=\"main-container\">\nÂ¨    <div v-if=\"romIsLoaded\" class=\"navigation\">\n        <FeatureButton icon=\"fullframe\" @click=\"this.$router.push('/fullframe')\">Full frame graphics</FeatureButton>\n        <FeatureButton icon=\"sprites\" @click=\"this.$router.push('/sprites')\">Sprites and fonts</FeatureButton>\n        <FeatureButton icon=\"checksum\" @click=\"this.$router.push('/checksum')\">Checksum tool</FeatureButton>\n        <FeatureButton icon=\"settings\" @click=\"this.$router.push('/settings')\">Settings</FeatureButton>\n    </div>\n\n    <FileDrop v-if=\"!romIsLoaded\" @loaded=\"loadRom\"></FileDrop>\n  </div>\n\n    <AlertDialog :show=\"showError\" title=\"Error\">\n      <p class=\"body-sm\">{{ errorMessage }}</p>\n      <div class=\"alert-footer\">\n        <StandardButton type=\"primary\" @click=\"okClicked\" class=\"alert-ok-btn\">OK</StandardButton>\n      </div>\n    </AlertDialog>\n    <DisclaimerModal :show=\"showDisclaimer\" @agree=\"agreeClicked\" @disagree=\"disagreeClicked\"></DisclaimerModal>\n\n  </div>\n</template>\n  \n<script>\n    import FileDrop from '../components/ui/FileDrop.vue';\n    import FeatureButton from '../components/ui/buttons/FeatureButton.vue';\n    import DisclaimerModal from '../components/ui/modals/DisclaimerModal.vue';\n    import AlertDialog from '../components/ui/modals/AlertDialog.vue';\n    import StandardButton from '../components/ui/buttons/StandardButton.vue';\n    import store from \"../stores/store.js\";\n    import { useMainStore } from '../stores/mainStore.js';\n    import { storeToRefs } from 'pinia';\n\n    const MainStore = useMainStore(store);\n\n    export default {\n      name: 'HomeView',\n      components: {\n        FileDrop,\n        FeatureButton,\n        DisclaimerModal,\n        AlertDialog,\n        StandardButton\n      },\n      props: {\n      },\n      data() {\n          return {\n            showDisclaimer: false,\n            tempFile: null,\n            showError: false,\n            errorMessage: ''\n          }\n      },\n      setup() {\n        const { romIsLoaded, warnings } = storeToRefs(MainStore);\n        return {\n          romIsLoaded,\n          warnings\n        }\n      },\n      beforeRouteEnter() {\n        if(!MainStore.romIsLoaded) {\n          MainStore.setViewTitle(\"Load ROM\");\n        } else {\n          MainStore.setViewTitle(\"Home\");\n        }\n        MainStore.isAtHomeView = true;\n      },\n      methods: {\n        agreeClicked() {\n          if(this.tempFile != null) {\n            this.loadRom(this.tempFile);\n          }\n          this.warnings.load++;\n          this.showDisclaimer = false;\n        },\n        disagreeClicked() {\n          this.tempFile = null;\n          MainStore.unloadRom();\n          this.showDisclaimer = false;\n        },\n        okClicked() {\n          this.showError = false;\n        },\n        loadRom(file) {\n          const reader = new FileReader();\n          reader.addEventListener(\"loadend\", () => {\n            if(reader.result) {\n              const bytes = new Uint8Array(reader.result);\n              const result = MainStore.loadRom(bytes, file.name);\n              if(result.error) {\n                this.errorMessage = result.msg;\n                this.showError = true;\n                MainStore.unloadRom();\n              } else {\n                if(this.warnings.load < 1) {\n                  this.tempFile = file;\n                  this.showDisclaimer = true;\n                }\n              }\n            }\n          });\n          reader.readAsArrayBuffer(file);\n        },\n      }\n    }\n  \n  </script>\n  \n  <style scoped>\n  .navigation {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: var(--space-xl);\n  }\n  .navigation a {\n    text-decoration: none;\n  }\n  .alert-ok-btn {\n    width: 12rem;\n    margin: 0 auto;\n  }\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}