{"ast":null,"code":"import { defineStore } from 'pinia';\nimport { WPCEdit } from 'wpcedit';\nimport { useStorage } from '@vueuse/core';\nimport { set, get, keys, getAll } from \"./idb.js\";\nexport const useWpcEditStore = defineStore('wpcEditStore', {\n  state: () => {\n    return {\n      romIsLoaded: useStorage('romIsLoaded', false),\n      romIsAltered: useStorage('romIsAltered', false),\n      viewTitle: 'WPC Edit',\n      fileName: useStorage('fileName', ''),\n      isAtHomeView: useStorage('isAtHomeView', true),\n      currSpriteIndex: 0,\n      currSpriteTableIndex: 0,\n      currentRomData: useStorage('currentRomData', null),\n      spriteTableMap: useStorage('spriteTableMap', null),\n      calculatedChecksum: useStorage('calculatedChecksum', 0),\n      storedChecksum: useStorage('storedChecksum', 0),\n      versionByte: useStorage('versionByte', 0),\n      fixupBytes: useStorage('fixupBytes', 0),\n      checksumIsValid: useStorage('', false)\n    };\n  },\n  getters: {\n    maxFullFrameIndex: state => {\n      /*\n      let index = 900;//WPCEdit.fullFrameImage.maxImageIndex;\n      let invalidImages = 0;\n      while(invalidImages<4 && index<2000) {\n          const plane = WPCEdit.fullFrameImage.getPlaneAt(index);\n          if(plane.type > 11 && plane.type != 255) {\n              invalidImages++;\n              console.log(\"INVALID at index: \"+index);\n          }\n          index++;\n      }\n      \n      //console.log(\"type: \"+plane.type);\n           console.log(\"max: \"+index)\n      return index;*/\n      console.log(state);\n      return 1000;\n    },\n    romData: state => {\n      return get('currentRomData');\n    }\n  },\n  actions: {\n    async POPULATE_FROM_CACHE({\n      state\n    }) {\n      let [keyss, values] = await Promise.all([keys(), getAll()]);\n      state.translations = keyss.map((key, index) => ({\n        id: key,\n        name: values[index]\n      }));\n    },\n    loadRom(data, name) {\n      WPCEdit.init();\n      if (WPCEdit.setRom(data)) {\n        this.fileName = name;\n        this.romIsLoaded = true;\n        this.currentRomData = data;\n        set('currentRomData', this.currentRomData);\n        this.spriteTableMap = WPCEdit.variableSizedImage.indexMap;\n        this.storedChecksum = pad(WPCEdit.checksum.stored.toString(16), 4).toUpperCase();\n        this.calculatedChecksum = pad(WPCEdit.checksum.calculated.toString(16), 4).toUpperCase();\n        this.fixupBytes = pad(WPCEdit.checksum.delta.toString(16), 4).toUpperCase();\n        this.versionByte = pad((WPCEdit.checksum.stored & 0xFF).toString(16), 2).toString(16);\n        this.checksumIsValid = WPCEdit.checksum.isValid;\n        //WPCEdit.verbose = true;\n      }\n\n      function pad(input, length) {\n        return (Array(length + 1).join('0') + input).slice(-length);\n      }\n    },\n    unloadRom() {\n      this.romIsLoaded = false;\n      this.romIsAltered = false;\n      this.currentRomData = null;\n      this.spriteTableMap = null;\n      this.currSpriteIndex = 0;\n      this.currSpriteTableIndex = 0;\n      this.currentRomData = null;\n      this.spriteTableMap = null;\n      this.calculatedChecksum = 0;\n      this.storedChecksum = 0;\n      this.versionByte = 0;\n      this.fixupBytes = 0;\n      this.checksumIsValid = false;\n    },\n    getFullFrameImageAt(index) {\n      return WPCEdit.fullFrameImage.getPlaneAt(index);\n    },\n    getSpriteAt(table, index) {\n      WPCEdit.variableSizedImage.table = table;\n      WPCEdit.variableSizedImage.index = index;\n      return WPCEdit.variableSizedImage.plane;\n    },\n    getSpriteCentered(table, index) {\n      WPCEdit.variableSizedImage.table = table;\n      WPCEdit.variableSizedImage.index = index;\n      const spritePlane = WPCEdit.variableSizedImage.plane;\n      const xOffset = Math.floor((128 - spritePlane.width) / 2);\n      const yOffset = Math.floor((32 - spritePlane.height) / 2);\n      const sprite = WPCEdit.variableSizedImage.placeInFullFrame(WPCEdit.variableSizedImage.plane, xOffset, yOffset);\n      return sprite;\n    },\n    getSpriteAsFullFrame(sprite, posX, posY) {\n      return sprite = WPCEdit.variableSizedImage.placeInFullFrame(sprite, posX, posY);\n    },\n    mergeImages(img1, img2, mask) {\n      return WPCEdit.fullFrameImage.mergeImages(img1, img2, mask);\n    },\n    updateChecksum(version) {\n      console.log(\"version is \" + version);\n      const result = WPCEdit.checksum.update(version);\n      if (result.status == 1) {\n        this.loadRom(result.data, this.fileName);\n        this.romIsAltered = true;\n      }\n      return result.status;\n    },\n    disableChecksum() {\n      const newRom = WPCEdit.checksum.disable();\n      this.loadRom(newRom, this.fileName);\n      this.romIsAltered = true;\n      const result = 1; //Temp! Use a status variable\n      return result;\n    },\n    downloadRom() {\n      const blob = new Blob([this.currentRomData], {\n        type: 'application/octet-stream'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const nameWithoutExtension = this.fileName.replace(/\\.[^/.]+$/, \"\");\n      const extension = \"rom\";\n      const date = new Date();\n      const suffix = \"_\" + date.getFullYear() + \"\" + pad(date.getMonth() + 1, 2) + \"\" + pad(date.getDate(), 2) + \"\" + pad(date.getHours(), 2) + \"\" + pad(date.getMinutes(), 2) + \"_cs\" + this.storedChecksum;\n      const fileName = nameWithoutExtension + suffix + \".\" + extension;\n      downloadURL(url, fileName);\n      setTimeout(function () {\n        return window.URL.revokeObjectURL(url);\n      }, 1000);\n      // Hacky, but standard, way to download blobs:\n      // Turn it into a hidden href, then click the href and remove it\n      function downloadURL(data, fileName) {\n        const a = document.createElement('a');\n        a.href = data;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.style = 'display: none';\n        a.click();\n        a.remove();\n      }\n      function pad(input, length) {\n        return (Array(length + 1).join('0') + input).slice(-length);\n      }\n    }\n  },\n  persist: {\n    storage: localStorage\n  }\n});","map":{"version":3,"names":["defineStore","WPCEdit","useStorage","set","get","keys","getAll","useWpcEditStore","state","romIsLoaded","romIsAltered","viewTitle","fileName","isAtHomeView","currSpriteIndex","currSpriteTableIndex","currentRomData","spriteTableMap","calculatedChecksum","storedChecksum","versionByte","fixupBytes","checksumIsValid","getters","maxFullFrameIndex","console","log","romData","actions","POPULATE_FROM_CACHE","keyss","values","Promise","all","translations","map","key","index","id","name","loadRom","data","init","setRom","variableSizedImage","indexMap","pad","checksum","stored","toString","toUpperCase","calculated","delta","isValid","input","length","Array","join","slice","unloadRom","getFullFrameImageAt","fullFrameImage","getPlaneAt","getSpriteAt","table","plane","getSpriteCentered","spritePlane","xOffset","Math","floor","width","yOffset","height","sprite","placeInFullFrame","getSpriteAsFullFrame","posX","posY","mergeImages","img1","img2","mask","updateChecksum","version","result","update","status","disableChecksum","newRom","disable","downloadRom","blob","Blob","type","url","window","URL","createObjectURL","nameWithoutExtension","replace","extension","date","Date","suffix","getFullYear","getMonth","getDate","getHours","getMinutes","downloadURL","setTimeout","revokeObjectURL","a","document","createElement","href","download","body","appendChild","style","click","remove","persist","storage","localStorage"],"sources":["/Users/permartinson/Documents/GitHub/wpcedit-vue/src/stores/wpcEditStore.js"],"sourcesContent":["import { defineStore } from 'pinia';\nimport { WPCEdit } from 'wpcedit';\nimport { useStorage } from '@vueuse/core';\nimport { set, get, keys, getAll } from \"./idb.js\";\n\nexport const useWpcEditStore = defineStore('wpcEditStore', {\n    state: () => {\n        return {\n            romIsLoaded: useStorage('romIsLoaded',false),\n            romIsAltered: useStorage('romIsAltered',false),\n            viewTitle: 'WPC Edit',\n            fileName: useStorage('fileName',''),\n            isAtHomeView: useStorage('isAtHomeView',true),\n            currSpriteIndex: 0,\n            currSpriteTableIndex: 0,\n            currentRomData: useStorage('currentRomData',null),\n            spriteTableMap: useStorage('spriteTableMap',null),\n            calculatedChecksum: useStorage('calculatedChecksum',0),\n            storedChecksum: useStorage('storedChecksum',0),\n            versionByte: useStorage('versionByte',0),\n            fixupBytes: useStorage('fixupBytes',0),\n            checksumIsValid: useStorage('',false)\n        }\n    },\n    getters: {\n        maxFullFrameIndex: (state) => {\n            /*\n            let index = 900;//WPCEdit.fullFrameImage.maxImageIndex;\n            let invalidImages = 0;\n            while(invalidImages<4 && index<2000) {\n                const plane = WPCEdit.fullFrameImage.getPlaneAt(index);\n                if(plane.type > 11 && plane.type != 255) {\n                    invalidImages++;\n                    console.log(\"INVALID at index: \"+index);\n                }\n                index++;\n            }\n            \n            //console.log(\"type: \"+plane.type);\n    \n            console.log(\"max: \"+index)\n            return index;*/\n            console.log(state);\n            return 1000;\n        },\n        romData: (state) => {\n            return get('currentRomData');\n        }\n    },\n    actions: {\n        async POPULATE_FROM_CACHE({ state }) {\n            let [keyss, values] = await Promise.all([keys(), getAll()])\n            state.translations = keyss.map((key, index) => ({ id: key, name: values[index] }))\n        },\n        loadRom(data,name) {\n            WPCEdit.init();\n            if(WPCEdit.setRom(data)) {\n                this.fileName = name;\n                this.romIsLoaded = true;\n                this.currentRomData = data;\n                set('currentRomData',this.currentRomData);\n                this.spriteTableMap = WPCEdit.variableSizedImage.indexMap;\n                this.storedChecksum = pad(WPCEdit.checksum.stored.toString(16),4).toUpperCase();\n                this.calculatedChecksum = pad(WPCEdit.checksum.calculated.toString(16),4).toUpperCase();\n                this.fixupBytes = pad(WPCEdit.checksum.delta.toString(16),4).toUpperCase();\n                this.versionByte = pad((WPCEdit.checksum.stored & 0xFF).toString(16),2).toString(16);\n                this.checksumIsValid = WPCEdit.checksum.isValid;\n                //WPCEdit.verbose = true;\n            }\n            function pad(input, length) {\n                return (Array(length + 1).join('0') + input).slice(-length);\n            }\n            \n        },\n        unloadRom() {\n            this.romIsLoaded = false;\n            this.romIsAltered = false;\n            this.currentRomData = null;\n            this.spriteTableMap = null;\n            this.currSpriteIndex = 0;\n            this.currSpriteTableIndex = 0;\n            this.currentRomData = null;\n            this.spriteTableMap = null;\n            this.calculatedChecksum = 0;\n            this.storedChecksum = 0;\n            this.versionByte = 0;\n            this.fixupBytes = 0;\n            this.checksumIsValid = false;\n        },\n        getFullFrameImageAt(index) {\n            return WPCEdit.fullFrameImage.getPlaneAt(index);\n        },\n        getSpriteAt(table,index) {\n            WPCEdit.variableSizedImage.table = table;\n            WPCEdit.variableSizedImage.index = index;\n            return WPCEdit.variableSizedImage.plane;\n        },\n        getSpriteCentered(table,index) {\n            WPCEdit.variableSizedImage.table = table;\n            WPCEdit.variableSizedImage.index = index;\n            const spritePlane = WPCEdit.variableSizedImage.plane\n            const xOffset = Math.floor((128-spritePlane.width)/2);\n            const yOffset = Math.floor((32-spritePlane.height)/2);\n            const sprite = WPCEdit.variableSizedImage.placeInFullFrame(WPCEdit.variableSizedImage.plane,xOffset,yOffset)\n            return sprite;\n        },\n        getSpriteAsFullFrame(sprite,posX,posY) {\n            return sprite = WPCEdit.variableSizedImage.placeInFullFrame(sprite,posX,posY)\n        },\n        mergeImages(img1,img2,mask) {\n            return WPCEdit.fullFrameImage.mergeImages(img1,img2,mask);\n        },\n        updateChecksum(version) {\n            console.log(\"version is \"+ version)\n            const result = WPCEdit.checksum.update(version);\n            if(result.status == 1) {\n                this.loadRom(result.data,this.fileName);\n                this.romIsAltered = true;\n            }\n            return result.status;\n        },\n        disableChecksum() {\n            const newRom = WPCEdit.checksum.disable();\n            this.loadRom(newRom,this.fileName);\n            this.romIsAltered = true;\n            const result = 1; //Temp! Use a status variable\n            return result;\n        },\n        downloadRom() {\n            const blob = new Blob([this.currentRomData], {\n              type: 'application/octet-stream'\n            });\n            const url = window.URL.createObjectURL(blob);\n\n            const nameWithoutExtension = this.fileName.replace(/\\.[^/.]+$/, \"\");\n            const extension = \"rom\";\n            const date = new Date();\n            const suffix = \"_\"+date.getFullYear()+\"\"+pad(date.getMonth()+1,2)+\"\"+pad(date.getDate(),2)+\"\"+pad(date.getHours(),2)+\"\"+pad(date.getMinutes(),2)+\"_cs\"+this.storedChecksum;\n            const fileName = nameWithoutExtension + suffix + \".\" + extension;\n\n            downloadURL(url, fileName);\n            setTimeout(function() {\n              return window.URL.revokeObjectURL(url);\n            }, 1000);\n            // Hacky, but standard, way to download blobs:\n            // Turn it into a hidden href, then click the href and remove it\n            function downloadURL(data, fileName) {\n                const a = document.createElement('a');\n                a.href = data;\n                a.download = fileName;\n                document.body.appendChild(a);\n                a.style = 'display: none';\n                a.click();\n                a.remove();\n              }\n            function pad(input, length) {\n                return (Array(length + 1).join('0') + input).slice(-length);\n            }\n        }\n    },\n    persist: {\n        storage: localStorage\n    },\n})"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}